!function(){"use strict";var e=document.querySelector("body");function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(void 0,o=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!==t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a.key),"symbol"===t(o)?o:String(o)),a)}var o}function r(){return JSON.parse(localStorage.getItem("toDos"))||[]}function a(e){if(document.querySelector(".todo").textContent="",e)e.forEach((function(e,t){new i(e.id,t,e.task,e.description,e.date,e.completed,e.project,e.priority)}));else{var t=r();t.forEach((function(e,n){new i(n,n,e.task,e.description,e.date,e.completed,e.project,e.priority),t[n].id=n,localStorage.setItem("toDos",JSON.stringify(t))}))}}var o=new WeakSet,i=function(){function e(t,n,r,a,i,l,d,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}(this,o),this.id=t,this.listId=n,this.title=r,this.description=a,this.date=i,this.completed=l,this.project=d,this.priority=s,function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,o,c).call(this)}var t,r;return t=e,(r=[{key:"createTaskContainer",value:function(e){var t=document.createElement("div");switch(t.classList.add("task-container"),t.setAttribute("id",this.id),e.appendChild(t),this.priority){case"1":t.classList.add("prio1");break;case"2":t.classList.add("prio2");break;case"3":t.classList.add("prio3");break;default:console.log("black")}return t}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(){var e=this,t=document.querySelector(".todo"),n=this.createTaskContainer(t),o=document.createElement("form");o.classList.add("task-form"),n.appendChild(o);var i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("name","taskTitle"),i.value=this.title,i.classList.add("task-title"),i.readOnly=!0,o.appendChild(i);var c=document.createElement("textarea");c.setAttribute("name","taskDescription"),c.setAttribute("rows",1),c.value=this.description,c.classList.add("task-description"),c.readOnly=!0,o.appendChild(c);var l=document.createElement("input");l.setAttribute("type","date"),l.setAttribute("name","taskDate"),l.value=this.date,l.classList.add("task-date"),l.readOnly=!0,o.appendChild(l);var d=document.createElement("select");d.classList.add("task-selector"),d.disabled=!0,o.appendChild(d),document.querySelectorAll("#project-select option").forEach((function(t){var n=document.createElement("option");n.value=t.value,n.textContent=t.label,e.project===t.value&&n.setAttribute("selected","selected"),d.appendChild(n)}));var s=document.createElement("input");s.setAttribute("type","submit"),s.value="EDIT",s.classList.add("edit-button"),s.classList.add("task-button"),o.appendChild(s),s.addEventListener("click",(function(t){var n;t.preventDefault(),n=e.listId,document.querySelectorAll(".task-form").forEach((function(e,t){n!==t&&(e.querySelector(".edit-button").disabled=!0,e.querySelector(".delete-button").disabled=!0)})),s.value="SAVE",i.readOnly=!1,i.classList.toggle("edit"),c.readOnly=!1,c.classList.toggle("edit"),l.readOnly=!1,l.classList.toggle("edit"),d.disabled=!1,s.addEventListener("click",(function(t){t.preventDefault(),s.value="EDIT",i.readOnly=!0,i.classList.toggle("edit"),c.readOnly=!0,c.classList.toggle("edit"),l.readOnly=!0,d.disabled=!0,l.classList.toggle("edit");var n=r();n[e.id].task=o.taskTitle.value,n[e.id].description=o.taskDescription.value,n[e.id].date=o.taskDate.value,n[e.id].project=d.value,localStorage.setItem("toDos",JSON.stringify(n)),a()}))}));var u=document.createElement("button");u.textContent="DONE",u.classList.add("delete-button"),u.classList.add("task-button"),o.appendChild(u),u.addEventListener("click",(function(t){t.preventDefault();var n=r();n.splice(e.id,1),document.querySelectorAll(".task-container")[e.listId].remove(),localStorage.setItem("toDos",JSON.stringify(n)),a()}))}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===l(t)?t:String(t)}var u,p,m,v,f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"renderProjects",value:function(){var e=this;this.parseProjects().forEach((function(t){e.createProject(t)}))}},{key:"parseProjects",value:function(){var e=JSON.parse(localStorage.getItem("projectList"))||[];return 0===e.length&&(e=this.projects,localStorage.setItem("projectList",JSON.stringify(e))),e}},{key:"addProjects",value:function(e){var t=JSON.parse(localStorage.getItem("projectList"));t.push(e),localStorage.setItem("projectList",JSON.stringify(t))}},{key:"removeProjects",value:function(e){var t=JSON.parse(localStorage.getItem("projectList"));t.splice(e,1),localStorage.setItem("projectList",JSON.stringify(t)),document.querySelectorAll(".project")[e].remove(),document.querySelectorAll("#project-select option")[e-1].remove(),a()}},{key:"createProject",value:function(e){var t=this,n=document.querySelector(".project-container"),o=document.createElement("div");o.classList.add("project"),o.setAttribute("id",e.name),n.appendChild(o);var i=document.createElement("p");if(i.textContent=e.name,o.appendChild(i),!e.protected){var c=document.createElement("button");c.textContent="DEL",o.appendChild(c),c.addEventListener("click",(function(){var n=t.parseProjects().findIndex((function(t){return t.name===e.name}));t.removeProjects(n)}))}if("Inbox"!==e.name&&"Today"!==e.name&&"Late"!==e.name){var l=document.querySelector("#project-select"),d=document.createElement("option");d.value=e.name.toLowerCase(),d.textContent=e.name,l.appendChild(d)}i.addEventListener("click",(function(){var t=r();"Inbox"!==e.name?"Today"!==e.name?a(t.filter((function(t){return t.project===e.name.toLowerCase()}))):a(t.filter((function(e){var t=(new Date).toJSON(),n=Date.parse(t);return Date.parse(e.date)<n}))):a()}))}},{key:"newProject",value:function(e){this.createProject(e),this.addProjects(e),a()}}],null&&d(t.prototype,null),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();u=f,m=[{name:"Inbox",protected:!0},{name:"Today",protected:!0}],(p=s(p="projects"))in u?Object.defineProperty(u,p,{value:m,enumerable:!0,configurable:!0,writable:!0}):u[p]=m,function(){var t=document.createElement("div");t.classList.add("sidebar"),e.appendChild(t);var n=document.createElement("button");n.classList.add("new-button"),n.textContent="Create Task",t.appendChild(n);var r=document.createElement("button");r.classList.add("project-button"),r.textContent="Add Project",t.appendChild(r);var a=document.createElement("div");a.classList.add("project-container"),t.appendChild(a)}(),(v=document.createElement("div")).classList.add("todo"),e.appendChild(v),function(){var t=document.createElement("div");t.classList.add("form-container"),t.classList.add("hidden"),e.appendChild(t);var n=document.createElement("div");n.classList.add("form-main"),t.appendChild(n);var r=document.createElement("form");r.classList.add("form"),n.appendChild(r);var a=document.createElement("label");a.setAttribute("for","task"),a.textContent="Task Title",r.appendChild(a);var o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("id","task"),o.setAttribute("name","task"),o.setAttribute("placeholder","e.g. walk the dog"),o.setAttribute("required",""),r.appendChild(o);var i=document.createElement("label");i.setAttribute("for","description"),i.textContent="Description",r.appendChild(i);var c=document.createElement("textarea");c.setAttribute("id","description"),c.setAttribute("name","description"),c.setAttribute("rows","6"),c.setAttribute("maxlength","200"),r.appendChild(c);var l=document.createElement("label");l.setAttribute("for","datum"),l.textContent="Due date",r.appendChild(l);var d=document.createElement("input");d.setAttribute("type","date"),d.setAttribute("id","datum"),d.setAttribute("name","datum"),r.appendChild(d);var s=document.createElement("select");s.setAttribute("id","project-select"),s.setAttribute("name","projectselect"),r.appendChild(s);var u=document.createElement("option");u.value="default",u.textContent="-",s.appendChild(u);var p=document.createElement("select");p.setAttribute("id","priority-select"),p.setAttribute("name","priorityselect"),r.appendChild(p);var m=document.createElement("option");m.value="1",m.textContent="1",p.appendChild(m);var v=document.createElement("option");v.value="2",v.textContent="2",p.appendChild(v);var f=document.createElement("option");f.value="3",f.textContent="3",p.appendChild(f);var b=document.createElement("input");b.setAttribute("type","submit"),b.setAttribute("id","submit"),b.setAttribute("value","Add"),r.appendChild(b);var y=document.createElement("button");y.setAttribute("id","cancel"),y.textContent="Cancel",r.appendChild(y)}(),document.querySelector("#cancel").addEventListener("click",(function(e){e.preventDefault(),document.querySelector(".form-container").classList.toggle("hidden");var t=document.querySelector(".form");t.task.value="",t.description.value="",t.datum.value=""})),document.querySelector("#submit").addEventListener("click",(function(e){e.preventDefault();var t=document.querySelector(".form");t.task.value&&t.datum.value?(document.querySelector(".form-container").classList.toggle("hidden"),function(e){var t=r(),n={task:e.task.value,description:e.description.value,date:e.datum.value,completed:!1,project:e.projectselect.value,priority:e.priorityselect.value};t.push(n),localStorage.setItem("toDos",JSON.stringify(t)),a()}(t),t.reset(),a()):alert("Please add Title and Due date!")})),document.querySelector(".new-button").addEventListener("click",(function(){document.querySelector(".form-container").classList.toggle("hidden")})),document.querySelector(".project-button").addEventListener("click",(function(){var e=prompt("Please enter a project name:","New Project");if(e){var t={name:e,protected:!1};f.newProject(t)}})),f.renderProjects(),a()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBaUIsU0FBUyxTQUFDQyxHQUM3QkEsRUFBRUUsaUJBQ0YsSUFBTTJDLEVBQU9wRyxTQUFTQyxjQUFjLFNBQy9CbUcsRUFBS3RGLEtBQUtvQixPQUFVa0UsRUFBS0ksTUFBTXRFLE9BSWRsQyxTQUFTQyxjQUFjLG1CQUMvQm9DLFVBQVVxQixPQUFPLFVGeUxuQyxTQUFrQjBDLEdBQ2hCLElBQU1oRixFQUFRbEIsSUFDUitHLEVBQU8sQ0FDWG5HLEtBQU1zRixFQUFLdEYsS0FBS29CLE1BQ2hCbkIsWUFBYXFGLEVBQUtyRixZQUFZbUIsTUFDOUJsQixLQUFNb0YsRUFBS0ksTUFBTXRFLE1BQ2pCakIsV0FBVyxFQUNYQyxRQUFTa0YsRUFBS2MsY0FBY2hGLE1BQzVCZixTQUFVaUYsRUFBS2UsZUFBZWpGLE9BRWhDZCxFQUFNdUQsS0FBS3NDLEdBQ1g1RyxhQUFhZ0IsUUFBUSxRQUFTbEIsS0FBS21CLFVBQVVGLElBQzdDYixHQUNGLENFck1JNkcsQ0FBU2hCLEdBRVRBLEVBQUtpQixRQUNMOUcsS0FSRStHLE1BQU0saUNBU1YsSUFLZXRILFNBQVNDLGNBQWMsZUFDL0JxRCxpQkFBaUIsU0FBUyxXQUNUdEQsU0FBU0MsY0FBYyxtQkFDL0JvQyxVQUFVcUIsT0FBTyxTQUNqQyxJQUttQjFELFNBQVNDLGNBQWMsbUJBQy9CcUQsaUJBQWlCLFNBQVMsV0FDbkMsSUFBTWlFLEVBQWNDLE9BQU8sK0JBQWdDLGVBQzNELEdBQUtELEVBQUwsQ0FHQSxJQUFNRSxFQUFhLENBQ2pCekMsS0FBTXVDLEVBQ050QyxXQUFXLEdBRWJaLEVBQVNxRCxXQUFXRCxFQUxwQixDQU1GLElDckRGcEQsRUFBU3NELGlCQUNUcEgsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL21vZHVsZXMvdWkuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvbW9kdWxlcy90b2RvLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL21vZHVsZXMvcHJvamVjdHMuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvbW9kdWxlcy9idXR0b24tZnVuY3Rpb25zLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKTtcblxuZnVuY3Rpb24gY3JlYXRlVG9kbygpIHtcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgZGl2LmNsYXNzTGlzdC5hZGQoXCJ0b2RvXCIpO1xuICBib2R5LmFwcGVuZENoaWxkKGRpdik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNpZGViYXIoKSB7XG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGRpdi5jbGFzc0xpc3QuYWRkKFwic2lkZWJhclwiKTtcbiAgYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuXG4gIGNvbnN0IG5ld0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gIG5ld0J1dHRvbi5jbGFzc0xpc3QuYWRkKFwibmV3LWJ1dHRvblwiKTtcbiAgbmV3QnV0dG9uLnRleHRDb250ZW50ID0gXCJDcmVhdGUgVGFza1wiO1xuICBkaXYuYXBwZW5kQ2hpbGQobmV3QnV0dG9uKTtcblxuICBjb25zdCBhZGRQcm9qZWN0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgYWRkUHJvamVjdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC1idXR0b25cIik7XG4gIGFkZFByb2plY3RCdXR0b24udGV4dENvbnRlbnQgPSBcIkFkZCBQcm9qZWN0XCI7XG4gIGRpdi5hcHBlbmRDaGlsZChhZGRQcm9qZWN0QnV0dG9uKTtcblxuICBjb25zdCBwcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgcHJvamVjdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC1jb250YWluZXJcIik7XG4gIGRpdi5hcHBlbmRDaGlsZChwcm9qZWN0Q29udGFpbmVyKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRm9ybSgpIHtcbiAgLy8gYWRkIGNvbnRhaW5lciBkaXZcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJmb3JtLWNvbnRhaW5lclwiKTtcbiAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gIGJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgLy8gYWRkIGNvbnRhaW5lciBkaXZcbiAgY29uc3QgbWFpbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIG1haW4uY2xhc3NMaXN0LmFkZChcImZvcm0tbWFpblwiKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKG1haW4pO1xuXG4gIC8vIGFkZCBmb3JtXG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiKTtcbiAgZm9ybS5jbGFzc0xpc3QuYWRkKFwiZm9ybVwiKTtcbiAgbWFpbi5hcHBlbmRDaGlsZChmb3JtKTtcblxuICAvLyBhZGQgdGFzayBuYW1lXG4gIGNvbnN0IHRhc2tMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgdGFza0xhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcInRhc2tcIik7XG4gIHRhc2tMYWJlbC50ZXh0Q29udGVudCA9IFwiVGFzayBUaXRsZVwiO1xuICBmb3JtLmFwcGVuZENoaWxkKHRhc2tMYWJlbCk7XG4gIGNvbnN0IHRhc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gIHRhc2suc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gIHRhc2suc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJ0YXNrXCIpO1xuICB0YXNrLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJ0YXNrXCIpO1xuICB0YXNrLnNldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIsIFwiZS5nLiB3YWxrIHRoZSBkb2dcIik7XG4gIHRhc2suc2V0QXR0cmlidXRlKFwicmVxdWlyZWRcIiwgXCJcIik7XG4gIGZvcm0uYXBwZW5kQ2hpbGQodGFzayk7XG5cbiAgLy8gYWRkIGRlc2NyaXB0aW9uXG4gIGNvbnN0IGRlc2NyaXB0aW9uTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gIGRlc2NyaXB0aW9uTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiZGVzY3JpcHRpb25cIik7XG4gIGRlc2NyaXB0aW9uTGFiZWwudGV4dENvbnRlbnQgPSBcIkRlc2NyaXB0aW9uXCI7XG4gIGZvcm0uYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb25MYWJlbCk7XG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuICBkZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImRlc2NyaXB0aW9uXCIpO1xuICBkZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwiZGVzY3JpcHRpb25cIik7XG4gIGRlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZShcInJvd3NcIiwgXCI2XCIpO1xuICBkZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoXCJtYXhsZW5ndGhcIiwgXCIyMDBcIik7XG4gIGZvcm0uYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pO1xuXG4gIC8vIGFkZCBkYXRlXG4gIGNvbnN0IGRhdHVtTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gIGRhdHVtTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiZGF0dW1cIik7XG4gIGRhdHVtTGFiZWwudGV4dENvbnRlbnQgPSBcIkR1ZSBkYXRlXCI7XG4gIGZvcm0uYXBwZW5kQ2hpbGQoZGF0dW1MYWJlbCk7XG4gIGNvbnN0IGRhdHVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICBkYXR1bS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiZGF0ZVwiKTtcbiAgZGF0dW0uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJkYXR1bVwiKTtcbiAgZGF0dW0uc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcImRhdHVtXCIpO1xuICBmb3JtLmFwcGVuZENoaWxkKGRhdHVtKTtcblxuICAvLyBhZGQgc2VsZWN0XG4gIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7XG4gIHNlbGVjdC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInByb2plY3Qtc2VsZWN0XCIpO1xuICBzZWxlY3Quc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcInByb2plY3RzZWxlY3RcIik7XG4gIGZvcm0uYXBwZW5kQ2hpbGQoc2VsZWN0KTtcbiAgY29uc3Qgb3B0aW9uRGVmYXVsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gIG9wdGlvbkRlZmF1bHQudmFsdWUgPSBcImRlZmF1bHRcIjtcbiAgb3B0aW9uRGVmYXVsdC50ZXh0Q29udGVudCA9IFwiLVwiO1xuICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uRGVmYXVsdCk7XG5cbiAgLy8gYWRkIHByaW9yaXR5XG4gIGNvbnN0IHByaW9yaXR5U2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcbiAgcHJpb3JpdHlTZWxlY3Quc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwcmlvcml0eS1zZWxlY3RcIik7XG4gIHByaW9yaXR5U2VsZWN0LnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJwcmlvcml0eXNlbGVjdFwiKTtcbiAgZm9ybS5hcHBlbmRDaGlsZChwcmlvcml0eVNlbGVjdCk7XG4gIGNvbnN0IG9wdGlvbk9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gIG9wdGlvbk9uZS52YWx1ZSA9IFwiMVwiO1xuICBvcHRpb25PbmUudGV4dENvbnRlbnQgPSBcIjFcIjtcbiAgcHJpb3JpdHlTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uT25lKTtcbiAgY29uc3Qgb3B0aW9uVHdvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgb3B0aW9uVHdvLnZhbHVlID0gXCIyXCI7XG4gIG9wdGlvblR3by50ZXh0Q29udGVudCA9IFwiMlwiO1xuICBwcmlvcml0eVNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb25Ud28pO1xuICBjb25zdCBvcHRpb25UaHJlZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gIG9wdGlvblRocmVlLnZhbHVlID0gXCIzXCI7XG4gIG9wdGlvblRocmVlLnRleHRDb250ZW50ID0gXCIzXCI7XG4gIHByaW9yaXR5U2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvblRocmVlKTtcblxuICAvLyBhZGQgYnV0dG9uXG4gIGNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgYWRkQnV0dG9uLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJzdWJtaXRcIik7XG4gIGFkZEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInN1Ym1pdFwiKTtcbiAgYWRkQnV0dG9uLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIFwiQWRkXCIpO1xuICBmb3JtLmFwcGVuZENoaWxkKGFkZEJ1dHRvbik7XG4gIC8vIGNhbmNlbCBidXR0b25cbiAgY29uc3QgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgY2FuY2VsQnV0dG9uLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiY2FuY2VsXCIpO1xuICBjYW5jZWxCdXR0b24udGV4dENvbnRlbnQgPSBcIkNhbmNlbFwiO1xuICBmb3JtLmFwcGVuZENoaWxkKGNhbmNlbEJ1dHRvbik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZVN0cnVjdHVyZSgpIHtcbiAgY3JlYXRlU2lkZWJhcigpO1xuICAvLyBjcmVhdGVIZWFkZXIoKTtcbiAgY3JlYXRlVG9kbygpO1xuICBjcmVhdGVGb3JtKCk7XG59XG4iLCIvLyBnZXQgaXRlbXMgZnJvbSBsb2NhbCBzdG9yYWdlXG5mdW5jdGlvbiBwYXJzZUxvY2FsU3RvcmFnZSgpIHtcbiAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0b0Rvc1wiKSkgfHwgW107XG59XG4vLyByZW5kZXIgdGFza3MgZnJvbSBsb2NhbCBzdG9yYWdlXG5mdW5jdGlvbiByZW5kZXIobGlzdCkge1xuICBjb25zdCBpbmJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb1wiKTtcbiAgaW5ib3gudGV4dENvbnRlbnQgPSBcIlwiO1xuXG4gIGlmIChsaXN0KSB7XG4gICAgY29uc3QgdG9Eb3MgPSBsaXN0O1xuICAgIHRvRG9zLmZvckVhY2goKGl0ZW0sIGlkKSA9PiB7XG4gICAgICAoKCkgPT5cbiAgICAgICAgbmV3IFRhc2soXG4gICAgICAgICAgaXRlbS5pZCxcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBpdGVtLnRhc2ssXG4gICAgICAgICAgaXRlbS5kZXNjcmlwdGlvbixcbiAgICAgICAgICBpdGVtLmRhdGUsXG4gICAgICAgICAgaXRlbS5jb21wbGV0ZWQsXG4gICAgICAgICAgaXRlbS5wcm9qZWN0LFxuICAgICAgICAgIGl0ZW0ucHJpb3JpdHlcbiAgICAgICAgKSkoKTtcbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCB0b0RvcyA9IHBhcnNlTG9jYWxTdG9yYWdlKCk7XG4gIHRvRG9zLmZvckVhY2goKGl0ZW0sIGlkKSA9PiB7XG4gICAgKCgpID0+XG4gICAgICBuZXcgVGFzayhcbiAgICAgICAgaWQsXG4gICAgICAgIGlkLFxuICAgICAgICBpdGVtLnRhc2ssXG4gICAgICAgIGl0ZW0uZGVzY3JpcHRpb24sXG4gICAgICAgIGl0ZW0uZGF0ZSxcbiAgICAgICAgaXRlbS5jb21wbGV0ZWQsXG4gICAgICAgIGl0ZW0ucHJvamVjdCxcbiAgICAgICAgaXRlbS5wcmlvcml0eVxuICAgICAgKSkoKTtcbiAgICB0b0Rvc1tpZF0uaWQgPSBpZDtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRvRG9zXCIsIEpTT04uc3RyaW5naWZ5KHRvRG9zKSk7XG4gIH0pO1xufVxuLy8gY3JlYXRlIHRhc2tzXG5jbGFzcyBUYXNrIHtcbiAgY29uc3RydWN0b3IoXG4gICAgaWQsXG4gICAgbGlzdElkLFxuICAgIHRpdGxlLFxuICAgIGRlc2NyaXB0aW9uLFxuICAgIGRhdGUsXG4gICAgY29tcGxldGVkLFxuICAgIHByb2plY3QsXG4gICAgcHJpb3JpdHlcbiAgKSB7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMubGlzdElkID0gbGlzdElkO1xuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgdGhpcy5kYXRlID0gZGF0ZTtcbiAgICB0aGlzLmNvbXBsZXRlZCA9IGNvbXBsZXRlZDtcbiAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICB0aGlzLiNjcmVhdGUoKTtcbiAgfVxuXG4gIGNyZWF0ZVRhc2tDb250YWluZXIoaW5ib3gpIHtcbiAgICAvLyB0YXNrIGNvbnRhaW5lclxuICAgIGNvbnN0IHRhc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRhc2suY2xhc3NMaXN0LmFkZChcInRhc2stY29udGFpbmVyXCIpO1xuICAgIHRhc2suc2V0QXR0cmlidXRlKFwiaWRcIiwgdGhpcy5pZCk7XG4gICAgaW5ib3guYXBwZW5kQ2hpbGQodGFzayk7XG4gICAgc3dpdGNoICh0aGlzLnByaW9yaXR5KSB7XG4gICAgICBjYXNlIFwiMVwiOlxuICAgICAgICB0YXNrLmNsYXNzTGlzdC5hZGQoXCJwcmlvMVwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiMlwiOlxuICAgICAgICB0YXNrLmNsYXNzTGlzdC5hZGQoXCJwcmlvMlwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiM1wiOlxuICAgICAgICB0YXNrLmNsYXNzTGlzdC5hZGQoXCJwcmlvM1wiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBjb25zb2xlLmxvZyhcImJsYWNrXCIpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHRhc2s7XG4gIH1cblxuICAvLyBjcmVhdGUgdGFzayB1aSBhbmQgZnVuY3Rpb25zXG4gICNjcmVhdGUoKSB7XG4gICAgY29uc3QgaW5ib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9cIik7XG4gICAgLy8gdGFzayBjb250YWluZXJcbiAgICBjb25zdCB0YXNrID0gdGhpcy5jcmVhdGVUYXNrQ29udGFpbmVyKGluYm94KTtcblxuICAgIC8vIHRhc2sgZm9ybVxuICAgIGNvbnN0IHRhc2tGb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7XG4gICAgdGFza0Zvcm0uY2xhc3NMaXN0LmFkZChcInRhc2stZm9ybVwiKTtcbiAgICB0YXNrLmFwcGVuZENoaWxkKHRhc2tGb3JtKTtcblxuICAgIC8vIHRhc2sgdGl0bGVcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICB0aXRsZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICB0aXRsZS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwidGFza1RpdGxlXCIpO1xuICAgIHRpdGxlLnZhbHVlID0gdGhpcy50aXRsZTtcbiAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKFwidGFzay10aXRsZVwiKTtcbiAgICB0aXRsZS5yZWFkT25seSA9IHRydWU7XG4gICAgdGFza0Zvcm0uYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gICAgLy8gdGFzayBkZXNjcmlwdGlvblxuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuICAgIGRlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJ0YXNrRGVzY3JpcHRpb25cIik7XG4gICAgZGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKFwicm93c1wiLCAxKTtcbiAgICBkZXNjcmlwdGlvbi52YWx1ZSA9IHRoaXMuZGVzY3JpcHRpb247XG4gICAgZGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZChcInRhc2stZGVzY3JpcHRpb25cIik7XG4gICAgZGVzY3JpcHRpb24ucmVhZE9ubHkgPSB0cnVlO1xuICAgIHRhc2tGb3JtLmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKTtcblxuICAgIC8vIHRhc2sgZGF0ZVxuICAgIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgZGF0ZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiZGF0ZVwiKTtcbiAgICBkYXRlLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJ0YXNrRGF0ZVwiKTtcbiAgICBkYXRlLnZhbHVlID0gdGhpcy5kYXRlO1xuICAgIGRhdGUuY2xhc3NMaXN0LmFkZChcInRhc2stZGF0ZVwiKTtcbiAgICBkYXRlLnJlYWRPbmx5ID0gdHJ1ZTtcbiAgICB0YXNrRm9ybS5hcHBlbmRDaGlsZChkYXRlKTtcblxuICAgIC8vIHByb2plY3Qgc2VsZWN0b3JcbiAgICBjb25zdCBwcm9qZWN0U2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcbiAgICBwcm9qZWN0U2VsZWN0LmNsYXNzTGlzdC5hZGQoXCJ0YXNrLXNlbGVjdG9yXCIpO1xuICAgIHByb2plY3RTZWxlY3QuZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRhc2tGb3JtLmFwcGVuZENoaWxkKHByb2plY3RTZWxlY3QpO1xuICAgIGNvbnN0IGFsbE9wdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI3Byb2plY3Qtc2VsZWN0IG9wdGlvblwiKTtcbiAgICBhbGxPcHRpb25zLmZvckVhY2goKG9wdCkgPT4ge1xuICAgICAgY29uc3QgbmV3T3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgIG5ld09wdGlvbi52YWx1ZSA9IG9wdC52YWx1ZTtcbiAgICAgIG5ld09wdGlvbi50ZXh0Q29udGVudCA9IG9wdC5sYWJlbDtcbiAgICAgIGlmICh0aGlzLnByb2plY3QgPT09IG9wdC52YWx1ZSkge1xuICAgICAgICBuZXdPcHRpb24uc2V0QXR0cmlidXRlKFwic2VsZWN0ZWRcIiwgXCJzZWxlY3RlZFwiKTtcbiAgICAgIH1cbiAgICAgIHByb2plY3RTZWxlY3QuYXBwZW5kQ2hpbGQobmV3T3B0aW9uKTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGRpc2FibGVCdXR0b25zKGl0ZW1JZCkge1xuICAgICAgY29uc3Qgc2VsZWN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGFzay1mb3JtXCIpO1xuICAgICAgc2VsZWN0Rm9ybS5mb3JFYWNoKChpdGVtLCBpZCkgPT4ge1xuICAgICAgICBpZiAoaXRlbUlkICE9PSBpZCkge1xuICAgICAgICAgIGNvbnN0IHNlbGVjdEVkaXQgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1idXR0b25cIik7XG4gICAgICAgICAgc2VsZWN0RWRpdC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgY29uc3Qgc2VsZWN0RGVsZXRlID0gaXRlbS5xdWVyeVNlbGVjdG9yKFwiLmRlbGV0ZS1idXR0b25cIik7XG4gICAgICAgICAgc2VsZWN0RGVsZXRlLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gdGFzayBlZGl0IGJ1dHRvbiBhbmQgZnVuY3Rpb25zXG4gICAgY29uc3QgZWRpdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBlZGl0QnRuLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJzdWJtaXRcIik7XG4gICAgZWRpdEJ0bi52YWx1ZSA9IFwiRURJVFwiO1xuICAgIGVkaXRCdG4uY2xhc3NMaXN0LmFkZChcImVkaXQtYnV0dG9uXCIpO1xuICAgIGVkaXRCdG4uY2xhc3NMaXN0LmFkZChcInRhc2stYnV0dG9uXCIpO1xuICAgIHRhc2tGb3JtLmFwcGVuZENoaWxkKGVkaXRCdG4pO1xuXG4gICAgZWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGRpc2FibGVCdXR0b25zKHRoaXMubGlzdElkKTtcbiAgICAgIGVkaXRCdG4udmFsdWUgPSBcIlNBVkVcIjtcbiAgICAgIHRpdGxlLnJlYWRPbmx5ID0gZmFsc2U7XG4gICAgICB0aXRsZS5jbGFzc0xpc3QudG9nZ2xlKFwiZWRpdFwiKTtcbiAgICAgIGRlc2NyaXB0aW9uLnJlYWRPbmx5ID0gZmFsc2U7XG4gICAgICBkZXNjcmlwdGlvbi5jbGFzc0xpc3QudG9nZ2xlKFwiZWRpdFwiKTtcbiAgICAgIGRhdGUucmVhZE9ubHkgPSBmYWxzZTtcbiAgICAgIGRhdGUuY2xhc3NMaXN0LnRvZ2dsZShcImVkaXRcIik7XG4gICAgICBwcm9qZWN0U2VsZWN0LmRpc2FibGVkID0gZmFsc2U7XG5cbiAgICAgIGVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlZGl0QnRuLnZhbHVlID0gXCJFRElUXCI7XG4gICAgICAgIHRpdGxlLnJlYWRPbmx5ID0gdHJ1ZTtcbiAgICAgICAgdGl0bGUuY2xhc3NMaXN0LnRvZ2dsZShcImVkaXRcIik7XG4gICAgICAgIGRlc2NyaXB0aW9uLnJlYWRPbmx5ID0gdHJ1ZTtcbiAgICAgICAgZGVzY3JpcHRpb24uY2xhc3NMaXN0LnRvZ2dsZShcImVkaXRcIik7XG4gICAgICAgIGRhdGUucmVhZE9ubHkgPSB0cnVlO1xuICAgICAgICBwcm9qZWN0U2VsZWN0LmRpc2FibGVkID0gdHJ1ZTtcblxuICAgICAgICBkYXRlLmNsYXNzTGlzdC50b2dnbGUoXCJlZGl0XCIpO1xuICAgICAgICBjb25zdCBkYXRhID0gcGFyc2VMb2NhbFN0b3JhZ2UoKTtcbiAgICAgICAgZGF0YVt0aGlzLmlkXS50YXNrID0gdGFza0Zvcm0udGFza1RpdGxlLnZhbHVlO1xuICAgICAgICBkYXRhW3RoaXMuaWRdLmRlc2NyaXB0aW9uID0gdGFza0Zvcm0udGFza0Rlc2NyaXB0aW9uLnZhbHVlO1xuICAgICAgICBkYXRhW3RoaXMuaWRdLmRhdGUgPSB0YXNrRm9ybS50YXNrRGF0ZS52YWx1ZTtcbiAgICAgICAgZGF0YVt0aGlzLmlkXS5wcm9qZWN0ID0gcHJvamVjdFNlbGVjdC52YWx1ZTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b0Rvc1wiLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgICAgIHJlbmRlcigpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyB0YXNrIGRlbGV0ZSBidXR0b24gYW5kIGZ1bmN0aW9uc1xuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgZGVsZXRlQnRuLnRleHRDb250ZW50ID0gXCJET05FXCI7XG4gICAgZGVsZXRlQnRuLmNsYXNzTGlzdC5hZGQoXCJkZWxldGUtYnV0dG9uXCIpO1xuICAgIGRlbGV0ZUJ0bi5jbGFzc0xpc3QuYWRkKFwidGFzay1idXR0b25cIik7XG4gICAgdGFza0Zvcm0uYXBwZW5kQ2hpbGQoZGVsZXRlQnRuKTtcblxuICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGRlbCkgPT4ge1xuICAgICAgZGVsLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCBkYXRhID0gcGFyc2VMb2NhbFN0b3JhZ2UoKTtcbiAgICAgIGRhdGEuc3BsaWNlKHRoaXMuaWQsIDEpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50YXNrLWNvbnRhaW5lclwiKVt0aGlzLmxpc3RJZF0ucmVtb3ZlKCk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRvRG9zXCIsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICAgIHJlbmRlcigpO1xuICAgIH0pO1xuICB9XG59XG4vLyBzYXZlIG5ldyB0YXNrIHRvIHRoZSBsb2NhTCBzdG9yYWdlXG5mdW5jdGlvbiBzYXZlVG9Ebyhmb3JtKSB7XG4gIGNvbnN0IHRvRG9zID0gcGFyc2VMb2NhbFN0b3JhZ2UoKTtcbiAgY29uc3QgdG9EbyA9IHtcbiAgICB0YXNrOiBmb3JtLnRhc2sudmFsdWUsXG4gICAgZGVzY3JpcHRpb246IGZvcm0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgZGF0ZTogZm9ybS5kYXR1bS52YWx1ZSxcbiAgICBjb21wbGV0ZWQ6IGZhbHNlLFxuICAgIHByb2plY3Q6IGZvcm0ucHJvamVjdHNlbGVjdC52YWx1ZSxcbiAgICBwcmlvcml0eTogZm9ybS5wcmlvcml0eXNlbGVjdC52YWx1ZSxcbiAgfTtcbiAgdG9Eb3MucHVzaCh0b0RvKTtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b0Rvc1wiLCBKU09OLnN0cmluZ2lmeSh0b0RvcykpO1xuICByZW5kZXIoKTtcbn1cblxuZXhwb3J0IHsgc2F2ZVRvRG8sIFRhc2ssIHJlbmRlciwgcGFyc2VMb2NhbFN0b3JhZ2UgfTtcbiIsImltcG9ydCB7IHBhcnNlTG9jYWxTdG9yYWdlLCByZW5kZXIgfSBmcm9tIFwiLi90b2RvXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2plY3RzIHtcbiAgc3RhdGljIHByb2plY3RzID0gW1xuICAgIHtcbiAgICAgIG5hbWU6IFwiSW5ib3hcIixcbiAgICAgIHByb3RlY3RlZDogdHJ1ZSxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiVG9kYXlcIixcbiAgICAgIHByb3RlY3RlZDogdHJ1ZSxcbiAgICB9LFxuICBdO1xuXG4gIHN0YXRpYyByZW5kZXJQcm9qZWN0cygpIHtcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMucGFyc2VQcm9qZWN0cygpO1xuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuY3JlYXRlUHJvamVjdChpdGVtKTtcbiAgICB9KTtcbiAgICAvLyB0aGlzLm5ld1Byb2plY3QoeyBuYW1lOiBcIkR1bW15XCIsIHByb3RlY3RlZDogZmFsc2UgfSk7XG4gIH1cblxuICBzdGF0aWMgcGFyc2VQcm9qZWN0cygpIHtcbiAgICBsZXQgaXRlbXMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicHJvamVjdExpc3RcIikpIHx8IFtdO1xuICAgIGlmIChpdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGl0ZW1zID0gdGhpcy5wcm9qZWN0cztcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdExpc3RcIiwgSlNPTi5zdHJpbmdpZnkoaXRlbXMpKTtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW1zO1xuICB9XG5cbiAgc3RhdGljIGFkZFByb2plY3RzKGl0ZW0pIHtcbiAgICBjb25zdCBpdGVtcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwcm9qZWN0TGlzdFwiKSk7XG4gICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RMaXN0XCIsIEpTT04uc3RyaW5naWZ5KGl0ZW1zKSk7XG4gIH1cblxuICBzdGF0aWMgcmVtb3ZlUHJvamVjdHMoaW5kZXgpIHtcbiAgICBjb25zdCBpdGVtcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwcm9qZWN0TGlzdFwiKSk7XG4gICAgaXRlbXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RMaXN0XCIsIEpTT04uc3RyaW5naWZ5KGl0ZW1zKSk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9qZWN0XCIpW2luZGV4XS5yZW1vdmUoKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI3Byb2plY3Qtc2VsZWN0IG9wdGlvblwiKVtpbmRleCAtIDFdLnJlbW92ZSgpO1xuICAgIHJlbmRlcigpO1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZVByb2plY3QoaXRlbSkge1xuICAgIGNvbnN0IHByb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtY29udGFpbmVyXCIpO1xuICAgIGNvbnN0IHByb2plY3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBwcm9qZWN0SXRlbS5jbGFzc0xpc3QuYWRkKFwicHJvamVjdFwiKTtcbiAgICBwcm9qZWN0SXRlbS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpdGVtLm5hbWUpO1xuICAgIHByb2plY3RDb250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdEl0ZW0pO1xuICAgIGNvbnN0IHByb2plY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICBwcm9qZWN0LnRleHRDb250ZW50ID0gaXRlbS5uYW1lO1xuICAgIHByb2plY3RJdGVtLmFwcGVuZENoaWxkKHByb2plY3QpO1xuXG4gICAgaWYgKCFpdGVtLnByb3RlY3RlZCkge1xuICAgICAgY29uc3QgcHJvamVjdERlbGV0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICBwcm9qZWN0RGVsZXRlLnRleHRDb250ZW50ID0gXCJERUxcIjtcbiAgICAgIHByb2plY3RJdGVtLmFwcGVuZENoaWxkKHByb2plY3REZWxldGUpO1xuICAgICAgcHJvamVjdERlbGV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0cyA9IHRoaXMucGFyc2VQcm9qZWN0cygpO1xuICAgICAgICBjb25zdCBpbmRleCA9IHByb2plY3RzLmZpbmRJbmRleChcbiAgICAgICAgICAoc2VhcmNoRm9yKSA9PiBzZWFyY2hGb3IubmFtZSA9PT0gaXRlbS5uYW1lXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMucmVtb3ZlUHJvamVjdHMoaW5kZXgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgaXRlbS5uYW1lICE9PSBcIkluYm94XCIgJiZcbiAgICAgIGl0ZW0ubmFtZSAhPT0gXCJUb2RheVwiICYmXG4gICAgICBpdGVtLm5hbWUgIT09IFwiTGF0ZVwiXG4gICAgKSB7XG4gICAgICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3Qtc2VsZWN0XCIpO1xuICAgICAgY29uc3QgbmV3T3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgIG5ld09wdGlvbi52YWx1ZSA9IGl0ZW0ubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgbmV3T3B0aW9uLnRleHRDb250ZW50ID0gaXRlbS5uYW1lO1xuICAgICAgc2VsZWN0LmFwcGVuZENoaWxkKG5ld09wdGlvbik7XG4gICAgfVxuXG4gICAgcHJvamVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgbG9jYWxMaXN0ID0gcGFyc2VMb2NhbFN0b3JhZ2UoKTtcbiAgICAgIGlmIChpdGVtLm5hbWUgPT09IFwiSW5ib3hcIikge1xuICAgICAgICByZW5kZXIoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXRlbS5uYW1lID09PSBcIlRvZGF5XCIpIHtcbiAgICAgICAgY29uc3QgZmlsdGVyZWRMaXN0ID0gbG9jYWxMaXN0LmZpbHRlcigobG9jYWxJdGVtKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCkudG9KU09OKCk7XG4gICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBEYXRlLnBhcnNlKGRhdGUpO1xuICAgICAgICAgIGNvbnN0IGxvY2FsSXRlbURhdGUgPSBEYXRlLnBhcnNlKGxvY2FsSXRlbS5kYXRlKTtcbiAgICAgICAgICByZXR1cm4gbG9jYWxJdGVtRGF0ZSA8IGN1cnJlbnREYXRlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVuZGVyKGZpbHRlcmVkTGlzdCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZmlsdGVyZWRMaXN0ID0gbG9jYWxMaXN0LmZpbHRlcihcbiAgICAgICAgKGxvY2FsSXRlbSkgPT4gbG9jYWxJdGVtLnByb2plY3QgPT09IGl0ZW0ubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICApO1xuICAgICAgcmVuZGVyKGZpbHRlcmVkTGlzdCk7XG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgbmV3UHJvamVjdChpdGVtKSB7XG4gICAgdGhpcy5jcmVhdGVQcm9qZWN0KGl0ZW0pO1xuICAgIHRoaXMuYWRkUHJvamVjdHMoaXRlbSk7XG4gICAgcmVuZGVyKCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IHNhdmVUb0RvLCByZW5kZXIgfSBmcm9tIFwiLi90b2RvXCI7XG5pbXBvcnQgUHJvamVjdHMgZnJvbSBcIi4vcHJvamVjdHNcIjtcblxuLy8gZnVuY3Rpb24gZm9yIGNhbmNlbCBidXR0b25cbmZ1bmN0aW9uIGNhbmNlbEJ1dHRvbigpIHtcbiAgY29uc3QgY2FuY2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYW5jZWxcIik7XG4gIGNhbmNlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1jb250YWluZXJcIik7XG4gICAgLy8gY29uc29sZS5sb2coXCJkb25lXCIpO1xuICAgIGZvcm1Db250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKTtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xuICAgIC8vIHNldCB2YWx1ZXMgdG8gZGVmYXVsdFxuICAgIGZvcm0udGFzay52YWx1ZSA9IFwiXCI7XG4gICAgZm9ybS5kZXNjcmlwdGlvbi52YWx1ZSA9IFwiXCI7XG4gICAgZm9ybS5kYXR1bS52YWx1ZSA9IFwiXCI7XG4gIH0pO1xufVxuXG4vLyBmdW5jdGlvbiBmb3IgYWRkIGJ1dHRvblxuZnVuY3Rpb24gYWRkQnV0dG9uKCkge1xuICBjb25zdCBhZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N1Ym1pdFwiKTtcbiAgYWRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xuICAgIGlmICghZm9ybS50YXNrLnZhbHVlIHx8ICFmb3JtLmRhdHVtLnZhbHVlKSB7XG4gICAgICBhbGVydChcIlBsZWFzZSBhZGQgVGl0bGUgYW5kIER1ZSBkYXRlIVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1jb250YWluZXJcIik7XG4gICAgZm9ybUNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpO1xuICAgIHNhdmVUb0RvKGZvcm0pO1xuICAgIC8vIHNldCB2YWx1ZXMgdG8gZGVmYXVsdFxuICAgIGZvcm0ucmVzZXQoKTtcbiAgICByZW5kZXIoKTtcbiAgfSk7XG59XG5cbi8vIGZ1bmN0aW9uIGZvciBuZXcgYnV0dG9uXG5mdW5jdGlvbiBuZXdCdXR0b24oKSB7XG4gIGNvbnN0IG5ld0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3LWJ1dHRvblwiKTtcbiAgbmV3QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY29uc3QgZm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1jb250YWluZXJcIik7XG4gICAgZm9ybUNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpO1xuICB9KTtcbn1cblxuLy8gZnVuY3Rpb24gZm9yIHByb2plY3QgYnV0dG9uXG5mdW5jdGlvbiBhZGRQcm9qZWN0KCkge1xuICBjb25zdCBwcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWJ1dHRvblwiKTtcbiAgcHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNvbnN0IHByb2plY3ROYW1lID0gcHJvbXB0KFwiUGxlYXNlIGVudGVyIGEgcHJvamVjdCBuYW1lOlwiLCBcIk5ldyBQcm9qZWN0XCIpO1xuICAgIGlmICghcHJvamVjdE5hbWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcHJvamVjdE9iaiA9IHtcbiAgICAgIG5hbWU6IHByb2plY3ROYW1lLFxuICAgICAgcHJvdGVjdGVkOiBmYWxzZSxcbiAgICB9O1xuICAgIFByb2plY3RzLm5ld1Byb2plY3QocHJvamVjdE9iaik7XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBidXR0b25GdW5jdGlvbnMoKSB7XG4gIGNhbmNlbEJ1dHRvbigpO1xuICBhZGRCdXR0b24oKTtcbiAgbmV3QnV0dG9uKCk7XG4gIGFkZFByb2plY3QoKTtcbn1cbiIsImltcG9ydCBjcmVhdGVTdHJ1Y3R1cmUgZnJvbSBcIi4vbW9kdWxlcy91aVwiO1xuaW1wb3J0IGJ1dHRvbkZ1bmN0aW9ucyBmcm9tIFwiLi9tb2R1bGVzL2J1dHRvbi1mdW5jdGlvbnNcIjtcbmltcG9ydCB7IHJlbmRlciB9IGZyb20gXCIuL21vZHVsZXMvdG9kb1wiO1xuaW1wb3J0IFByb2plY3RzIGZyb20gXCIuL21vZHVsZXMvcHJvamVjdHNcIjtcblxuY3JlYXRlU3RydWN0dXJlKCk7XG5idXR0b25GdW5jdGlvbnMoKTtcblByb2plY3RzLnJlbmRlclByb2plY3RzKCk7XG5yZW5kZXIoKTtcbiJdLCJuYW1lcyI6WyJib2R5IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicGFyc2VMb2NhbFN0b3JhZ2UiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicmVuZGVyIiwibGlzdCIsInRleHRDb250ZW50IiwiZm9yRWFjaCIsIml0ZW0iLCJpZCIsIlRhc2siLCJ0YXNrIiwiZGVzY3JpcHRpb24iLCJkYXRlIiwiY29tcGxldGVkIiwicHJvamVjdCIsInByaW9yaXR5IiwidG9Eb3MiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiX2NyZWF0ZSIsIldlYWtTZXQiLCJsaXN0SWQiLCJ0aXRsZSIsIl9jbGFzc0NhbGxDaGVjayIsIl9jbGFzc1ByaXZhdGVNZXRob2RJbml0U3BlYyIsInRoaXMiLCJfY2xhc3NQcml2YXRlTWV0aG9kR2V0IiwiX2NyZWF0ZTIiLCJjYWxsIiwia2V5IiwidmFsdWUiLCJpbmJveCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJhcHBlbmRDaGlsZCIsImNvbnNvbGUiLCJsb2ciLCJfdGhpcyIsImNyZWF0ZVRhc2tDb250YWluZXIiLCJ0YXNrRm9ybSIsInJlYWRPbmx5IiwicHJvamVjdFNlbGVjdCIsImRpc2FibGVkIiwicXVlcnlTZWxlY3RvckFsbCIsIm9wdCIsIm5ld09wdGlvbiIsImxhYmVsIiwiZWRpdEJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiaXRlbUlkIiwicHJldmVudERlZmF1bHQiLCJ0b2dnbGUiLCJldmVudCIsImRhdGEiLCJ0YXNrVGl0bGUiLCJ0YXNrRGVzY3JpcHRpb24iLCJ0YXNrRGF0ZSIsImRlbGV0ZUJ0biIsImRlbCIsInNwbGljZSIsInJlbW92ZSIsImRpdiIsIlByb2plY3RzIiwicGFyc2VQcm9qZWN0cyIsImNyZWF0ZVByb2plY3QiLCJpdGVtcyIsImxlbmd0aCIsInByb2plY3RzIiwicHVzaCIsImluZGV4IiwiX3RoaXMyIiwicHJvamVjdENvbnRhaW5lciIsInByb2plY3RJdGVtIiwibmFtZSIsInByb3RlY3RlZCIsInByb2plY3REZWxldGUiLCJmaW5kSW5kZXgiLCJzZWFyY2hGb3IiLCJyZW1vdmVQcm9qZWN0cyIsInNlbGVjdCIsInRvTG93ZXJDYXNlIiwibG9jYWxMaXN0IiwiZmlsdGVyIiwibG9jYWxJdGVtIiwiRGF0ZSIsInRvSlNPTiIsImN1cnJlbnREYXRlIiwiYWRkUHJvamVjdHMiLCJuZXdCdXR0b24iLCJhZGRQcm9qZWN0QnV0dG9uIiwiY3JlYXRlU2lkZWJhciIsImNvbnRhaW5lciIsIm1haW4iLCJmb3JtIiwidGFza0xhYmVsIiwiZGVzY3JpcHRpb25MYWJlbCIsImRhdHVtTGFiZWwiLCJkYXR1bSIsIm9wdGlvbkRlZmF1bHQiLCJwcmlvcml0eVNlbGVjdCIsIm9wdGlvbk9uZSIsIm9wdGlvblR3byIsIm9wdGlvblRocmVlIiwiYWRkQnV0dG9uIiwiY2FuY2VsQnV0dG9uIiwiY3JlYXRlRm9ybSIsInRvRG8iLCJwcm9qZWN0c2VsZWN0IiwicHJpb3JpdHlzZWxlY3QiLCJzYXZlVG9EbyIsInJlc2V0IiwiYWxlcnQiLCJwcm9qZWN0TmFtZSIsInByb21wdCIsInByb2plY3RPYmoiLCJuZXdQcm9qZWN0IiwicmVuZGVyUHJvamVjdHMiXSwic291cmNlUm9vdCI6IiJ9