(()=>{"use strict";const t=document.querySelector("body");function e(){return JSON.parse(localStorage.getItem("toDos"))||[]}function n(){document.querySelector(".todo").textContent="",e().forEach(((t,e)=>{new s(e,t.task,t.description,t.date,t.completed,t.project)}))}class s{constructor(t,e,n,s,a,c){this.id=t,this.title=e,this.description=n,this.date=s,this.completed=a,this.project=c,this.#t()}createTaskContainer(t){const e=document.createElement("div");return e.classList.add("task-container"),e.setAttribute("id",this.id),t.appendChild(e),e}#t(){const t=document.querySelector(".todo"),s=this.createTaskContainer(t),a=document.createElement("form");a.classList.add("task-form"),s.appendChild(a);const c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("name","taskTitle"),c.readOnly=!0,c.value=this.title,c.classList.add("task-title"),a.appendChild(c);const o=document.createElement("textarea");o.setAttribute("name","taskDescription"),o.readOnly=!0,o.value=this.description,o.classList.add("task-description"),a.appendChild(o);const d=document.createElement("input");d.setAttribute("type","date"),d.setAttribute("name","taskDate"),d.readOnly=!0,d.value=this.date,d.classList.add("task-date"),a.appendChild(d);const i=document.createElement("input");i.setAttribute("type","submit"),i.value="EDIT",i.classList.add("edit-button"),a.appendChild(i),i.addEventListener("click",(t=>{t.preventDefault(),i.value="SAVE",c.readOnly=!1,c.classList.toggle("edit"),o.readOnly=!1,o.classList.toggle("edit"),d.readOnly=!1,d.classList.toggle("edit"),i.addEventListener("click",(t=>{t.preventDefault(),i.value="EDIT",c.readOnly=!0,c.classList.toggle("edit"),o.readOnly=!0,o.classList.toggle("edit"),d.readOnly=!0,d.classList.toggle("edit");const s=e();s[this.id].task=a.taskTitle.value,s[this.id].description=a.taskDescription.value,s[this.id].date=a.taskDate.value,localStorage.setItem("toDos",JSON.stringify(s)),n()}))}));const r=document.createElement("button");r.textContent="DEL",r.classList.add("delete-button"),a.appendChild(r),r.addEventListener("click",(t=>{t.preventDefault();const s=e();s.splice(this.id,1),document.querySelectorAll(".task-container")[this.id].remove(),localStorage.setItem("toDos",JSON.stringify(s)),n()}))}}class a{static projects=[{name:"Inbox",protected:!0},{name:"Today",protected:!0},{name:"Late",protected:!0}];static renderProjects(){this.parseProjects().forEach((t=>{this.createProject(t)}))}static parseProjects(){let t=JSON.parse(localStorage.getItem("projectList"))||[];return 0===t.length&&(t=this.projects,localStorage.setItem("projectList",JSON.stringify(t))),t}static saveProjects(t){const e=JSON.parse(localStorage.getItem("projectList"));e.push(t),localStorage.setItem("projectList",JSON.stringify(e))}static createProject(t){const e=document.querySelector(".project-container"),n=document.createElement("p");n.textContent=t.name,n.classList.add("project"),n.setAttribute("id",t.name),e.appendChild(n),n.addEventListener("click",(()=>{console.log(n)}))}static newProject(t){this.createProject(t),this.saveProjects(t)}}!function(){const e=document.createElement("div");e.classList.add("sidebar"),t.appendChild(e);const n=document.createElement("button");n.classList.add("new-button"),n.textContent="Create Task",e.appendChild(n);const s=document.createElement("button");s.classList.add("project-button"),s.textContent="Add Project",e.appendChild(s);const a=document.createElement("div");a.classList.add("project-container"),e.appendChild(a)}(),function(){const e=document.createElement("div");e.classList.add("todo"),t.appendChild(e)}(),function(){const e=document.createElement("div");e.classList.add("form-container"),e.classList.add("hidden"),t.appendChild(e);const n=document.createElement("div");n.classList.add("form-main"),e.appendChild(n);const s=document.createElement("form");s.classList.add("form"),n.appendChild(s);const a=document.createElement("label");a.setAttribute("for","task"),a.textContent="Task Title",s.appendChild(a);const c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("id","task"),c.setAttribute("name","task"),c.setAttribute("placeholder","e.g. walk the dog"),c.setAttribute("required",""),s.appendChild(c);const o=document.createElement("label");o.setAttribute("for","description"),o.textContent="Description",s.appendChild(o);const d=document.createElement("textarea");d.setAttribute("id","description"),d.setAttribute("name","description"),d.setAttribute("rows","6"),d.setAttribute("maxlength","200"),s.appendChild(d);const i=document.createElement("label");i.setAttribute("for","datum"),i.textContent="Due date",s.appendChild(i);const r=document.createElement("input");r.setAttribute("type","date"),r.setAttribute("id","datum"),r.setAttribute("name","datum"),s.appendChild(r);const l=document.createElement("select");l.setAttribute("id","project-select"),s.appendChild(l);const u=document.createElement("option");u.value="default",u.textContent="-",l.appendChild(u);const p=document.createElement("input");p.setAttribute("type","submit"),p.setAttribute("id","submit"),p.setAttribute("value","Add"),s.appendChild(p);const m=document.createElement("button");m.setAttribute("id","cancel"),m.textContent="Cancel",s.appendChild(m)}(),document.querySelector("#cancel").addEventListener("click",(t=>{t.preventDefault(),document.querySelector(".form-container").classList.toggle("hidden");const e=document.querySelector(".form");e.task.value="",e.description.value="",e.datum.value=""})),document.querySelector("#submit").addEventListener("click",(t=>{t.preventDefault(),document.querySelector(".form-container").classList.toggle("hidden");const s=document.querySelector(".form");!function(t){const n=e(),s={task:t.task.value,description:t.description.value,date:t.datum.value,completed:!1,project:"Inbox"};n.push(s),localStorage.setItem("toDos",JSON.stringify(n))}(s),s.task.value="",s.description.value="",s.datum.value="",n()})),document.querySelector(".new-button").addEventListener("click",(()=>{document.querySelector(".form-container").classList.toggle("hidden")})),document.querySelector(".project-button").addEventListener("click",(()=>{const t={name:prompt("Please enter a project name:","New Project"),protected:!1};a.newProject(t)})),n(),a.renderProjects()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VEEsRUFBS3hELEtBQUtpQixNQUFRLEdBQ2xCdUMsRUFBS3ZELFlBQVlnQixNQUFRLEdBQ3pCdUMsRUFBS0ksTUFBTTNDLE1BQVEsR0FDbkJ2QixHQUFRLElBTUtQLFNBQVNDLGNBQWMsZUFDL0IrQixpQkFBaUIsU0FBUyxLQUNUaEMsU0FBU0MsY0FBYyxtQkFDL0J1QixVQUFVVyxPQUFPLFNBQVMsSUFNdkJuQyxTQUFTQyxjQUFjLG1CQUMvQitCLGlCQUFpQixTQUFTLEtBQ25DLE1BQ01rRCxFQUFhLENBQ2pCaEMsS0FGa0JpQyxPQUFPLCtCQUFnQyxlQUd6RGhDLFdBQVcsR0FFYkgsRUFBU29DLFdBQVdGLEVBQVcsSUMvQ25DM0UsSUFDQXlDLEVBQVNxQyxnQiIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL21vZHVsZXMvdWkuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvbW9kdWxlcy90b2RvLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL21vZHVsZXMvcHJvamVjdHMuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvbW9kdWxlcy9idXR0b24tZnVuY3Rpb25zLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKTtcblxuLy8gZnVuY3Rpb24gY3JlYXRlSGVhZGVyKCkge1xuLy8gICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuLy8gICBkaXYuY2xhc3NMaXN0LmFkZChcImhlYWRlclwiKTtcbi8vICAgYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuLy8gfVxuXG5mdW5jdGlvbiBjcmVhdGVUb2RvKCkge1xuICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBkaXYuY2xhc3NMaXN0LmFkZChcInRvZG9cIik7XG4gIGJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU2lkZWJhcigpIHtcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgZGl2LmNsYXNzTGlzdC5hZGQoXCJzaWRlYmFyXCIpO1xuICBib2R5LmFwcGVuZENoaWxkKGRpdik7XG5cbiAgY29uc3QgbmV3QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgbmV3QnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJuZXctYnV0dG9uXCIpO1xuICBuZXdCdXR0b24udGV4dENvbnRlbnQgPSBcIkNyZWF0ZSBUYXNrXCI7XG4gIGRpdi5hcHBlbmRDaGlsZChuZXdCdXR0b24pO1xuXG4gIGNvbnN0IGFkZFByb2plY3RCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBhZGRQcm9qZWN0QnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LWJ1dHRvblwiKTtcbiAgYWRkUHJvamVjdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQWRkIFByb2plY3RcIjtcbiAgZGl2LmFwcGVuZENoaWxkKGFkZFByb2plY3RCdXR0b24pO1xuXG4gIGNvbnN0IHByb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBwcm9qZWN0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LWNvbnRhaW5lclwiKTtcbiAgZGl2LmFwcGVuZENoaWxkKHByb2plY3RDb250YWluZXIpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVGb3JtKCkge1xuICAvLyBhZGQgY29udGFpbmVyIGRpdlxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChcImZvcm0tY29udGFpbmVyXCIpO1xuICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcbiAgYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAvLyBhZGQgY29udGFpbmVyIGRpdlxuICBjb25zdCBtYWluID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgbWFpbi5jbGFzc0xpc3QuYWRkKFwiZm9ybS1tYWluXCIpO1xuICAvLyBjb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKG1haW4pO1xuXG4gIC8vIGFkZCBmb3JtXG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiKTtcbiAgZm9ybS5jbGFzc0xpc3QuYWRkKFwiZm9ybVwiKTtcbiAgbWFpbi5hcHBlbmRDaGlsZChmb3JtKTtcblxuICAvLyBhZGQgdGFzayBuYW1lXG4gIGNvbnN0IHRhc2tMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgdGFza0xhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcInRhc2tcIik7XG4gIHRhc2tMYWJlbC50ZXh0Q29udGVudCA9IFwiVGFzayBUaXRsZVwiO1xuICBmb3JtLmFwcGVuZENoaWxkKHRhc2tMYWJlbCk7XG4gIGNvbnN0IHRhc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gIHRhc2suc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gIHRhc2suc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJ0YXNrXCIpO1xuICB0YXNrLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJ0YXNrXCIpO1xuICB0YXNrLnNldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIsIFwiZS5nLiB3YWxrIHRoZSBkb2dcIik7XG4gIHRhc2suc2V0QXR0cmlidXRlKFwicmVxdWlyZWRcIiwgXCJcIik7XG4gIGZvcm0uYXBwZW5kQ2hpbGQodGFzayk7XG5cbiAgLy8gYWRkIGRlc2NyaXB0aW9uXG4gIGNvbnN0IGRlc2NyaXB0aW9uTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gIGRlc2NyaXB0aW9uTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiZGVzY3JpcHRpb25cIik7XG4gIGRlc2NyaXB0aW9uTGFiZWwudGV4dENvbnRlbnQgPSBcIkRlc2NyaXB0aW9uXCI7XG4gIGZvcm0uYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb25MYWJlbCk7XG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuICBkZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImRlc2NyaXB0aW9uXCIpO1xuICBkZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwiZGVzY3JpcHRpb25cIik7XG4gIGRlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZShcInJvd3NcIiwgXCI2XCIpO1xuICBkZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoXCJtYXhsZW5ndGhcIiwgXCIyMDBcIik7XG4gIGZvcm0uYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pO1xuXG4gIC8vIGFkZCBkYXRlXG4gIGNvbnN0IGRhdHVtTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gIGRhdHVtTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiZGF0dW1cIik7XG4gIGRhdHVtTGFiZWwudGV4dENvbnRlbnQgPSBcIkR1ZSBkYXRlXCI7XG4gIGZvcm0uYXBwZW5kQ2hpbGQoZGF0dW1MYWJlbCk7XG4gIGNvbnN0IGRhdHVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICBkYXR1bS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiZGF0ZVwiKTtcbiAgZGF0dW0uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJkYXR1bVwiKTtcbiAgZGF0dW0uc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcImRhdHVtXCIpO1xuICBmb3JtLmFwcGVuZENoaWxkKGRhdHVtKTtcbiAgLy8gYWRkIHNlbGVjdFxuICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xuICBzZWxlY3Quc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwcm9qZWN0LXNlbGVjdFwiKTtcbiAgZm9ybS5hcHBlbmRDaGlsZChzZWxlY3QpO1xuICBjb25zdCBvcHRpb25EZWZhdWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgb3B0aW9uRGVmYXVsdC52YWx1ZSA9IFwiZGVmYXVsdFwiO1xuICBvcHRpb25EZWZhdWx0LnRleHRDb250ZW50ID0gXCItXCI7XG4gIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb25EZWZhdWx0KTtcbiAgLy8gYWRkIGJ1dHRvblxuICBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gIGFkZEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwic3VibWl0XCIpO1xuICBhZGRCdXR0b24uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJzdWJtaXRcIik7XG4gIGFkZEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBcIkFkZFwiKTtcbiAgZm9ybS5hcHBlbmRDaGlsZChhZGRCdXR0b24pO1xuICAvLyBjYW5jZWwgYnV0dG9uXG4gIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gIGNhbmNlbEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImNhbmNlbFwiKTtcbiAgY2FuY2VsQnV0dG9uLnRleHRDb250ZW50ID0gXCJDYW5jZWxcIjtcbiAgZm9ybS5hcHBlbmRDaGlsZChjYW5jZWxCdXR0b24pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVTdHJ1Y3R1cmUoKSB7XG4gIGNyZWF0ZVNpZGViYXIoKTtcbiAgLy8gY3JlYXRlSGVhZGVyKCk7XG4gIGNyZWF0ZVRvZG8oKTtcbiAgY3JlYXRlRm9ybSgpO1xufVxuIiwiLy8gZ2V0IGl0ZW1zIGZyb20gbG9jYWwgc3RvcmFnZVxuZnVuY3Rpb24gcGFyc2VMb2NhbFN0b3JhZ2UoKSB7XG4gIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidG9Eb3NcIikpIHx8IFtdO1xufVxuLy8gcmVuZGVyIHRhc2tzIGZyb20gbG9jYWwgc3RvcmFnZVxuZnVuY3Rpb24gcmVuZGVyKCkge1xuICBjb25zdCBpbmJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb1wiKTtcbiAgaW5ib3gudGV4dENvbnRlbnQgPSBcIlwiO1xuICBjb25zdCB0b0RvcyA9IHBhcnNlTG9jYWxTdG9yYWdlKCk7XG4gIHRvRG9zLmZvckVhY2goKGl0ZW0sIGlkKSA9PiB7XG4gICAgKCgpID0+XG4gICAgICBuZXcgVGFzayhcbiAgICAgICAgaWQsXG4gICAgICAgIGl0ZW0udGFzayxcbiAgICAgICAgaXRlbS5kZXNjcmlwdGlvbixcbiAgICAgICAgaXRlbS5kYXRlLFxuICAgICAgICBpdGVtLmNvbXBsZXRlZCxcbiAgICAgICAgaXRlbS5wcm9qZWN0XG4gICAgICApKSgpO1xuICB9KTtcbn1cbi8vIGNyZWF0ZSB0YXNrc1xuY2xhc3MgVGFzayB7XG4gIGNvbnN0cnVjdG9yKGlkLCB0aXRsZSwgZGVzY3JpcHRpb24sIGRhdGUsIGNvbXBsZXRlZCwgcHJvamVjdCkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgIHRoaXMuZGF0ZSA9IGRhdGU7XG4gICAgdGhpcy5jb21wbGV0ZWQgPSBjb21wbGV0ZWQ7XG4gICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICB0aGlzLiNjcmVhdGUoKTtcbiAgfVxuXG4gIGNyZWF0ZVRhc2tDb250YWluZXIoaW5ib3gpIHtcbiAgICAvLyB0YXNrIGNvbnRhaW5lclxuICAgIGNvbnN0IHRhc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRhc2suY2xhc3NMaXN0LmFkZChcInRhc2stY29udGFpbmVyXCIpO1xuICAgIHRhc2suc2V0QXR0cmlidXRlKFwiaWRcIiwgdGhpcy5pZCk7XG4gICAgaW5ib3guYXBwZW5kQ2hpbGQodGFzayk7XG4gICAgcmV0dXJuIHRhc2s7XG4gIH1cblxuICAvLyBjcmVhdGUgdGFzayB1aSBhbmQgZnVuY3Rpb25zXG4gICNjcmVhdGUoKSB7XG4gICAgY29uc3QgaW5ib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9cIik7XG4gICAgLy8gdGFzayBjb250YWluZXJcbiAgICBjb25zdCB0YXNrID0gdGhpcy5jcmVhdGVUYXNrQ29udGFpbmVyKGluYm94KTtcbiAgICAvLyB0YXNrIGZvcm1cbiAgICBjb25zdCB0YXNrRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpO1xuICAgIHRhc2tGb3JtLmNsYXNzTGlzdC5hZGQoXCJ0YXNrLWZvcm1cIik7XG4gICAgdGFzay5hcHBlbmRDaGlsZCh0YXNrRm9ybSk7XG4gICAgLy8gdGFzayB0aXRsZVxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIHRpdGxlLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgIHRpdGxlLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJ0YXNrVGl0bGVcIik7XG4gICAgdGl0bGUucmVhZE9ubHkgPSB0cnVlO1xuICAgIHRpdGxlLnZhbHVlID0gdGhpcy50aXRsZTtcbiAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKFwidGFzay10aXRsZVwiKTtcbiAgICB0YXNrRm9ybS5hcHBlbmRDaGlsZCh0aXRsZSk7XG4gICAgLy8gdGFzayBkZXNjcmlwdGlvblxuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuICAgIGRlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJ0YXNrRGVzY3JpcHRpb25cIik7XG4gICAgZGVzY3JpcHRpb24ucmVhZE9ubHkgPSB0cnVlO1xuICAgIGRlc2NyaXB0aW9uLnZhbHVlID0gdGhpcy5kZXNjcmlwdGlvbjtcbiAgICBkZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKFwidGFzay1kZXNjcmlwdGlvblwiKTtcbiAgICB0YXNrRm9ybS5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbik7XG4gICAgLy8gdGFzayBkYXRlXG4gICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBkYXRlLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJkYXRlXCIpO1xuICAgIGRhdGUuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcInRhc2tEYXRlXCIpO1xuICAgIGRhdGUucmVhZE9ubHkgPSB0cnVlO1xuICAgIGRhdGUudmFsdWUgPSB0aGlzLmRhdGU7XG4gICAgZGF0ZS5jbGFzc0xpc3QuYWRkKFwidGFzay1kYXRlXCIpO1xuICAgIHRhc2tGb3JtLmFwcGVuZENoaWxkKGRhdGUpO1xuICAgIC8vIHRhc2sgZWRpdCBidXR0b24gYW5kIGZ1bmN0aW9uc1xuICAgIGNvbnN0IGVkaXRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgZWRpdEJ0bi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwic3VibWl0XCIpO1xuICAgIGVkaXRCdG4udmFsdWUgPSBcIkVESVRcIjtcbiAgICBlZGl0QnRuLmNsYXNzTGlzdC5hZGQoXCJlZGl0LWJ1dHRvblwiKTtcbiAgICB0YXNrRm9ybS5hcHBlbmRDaGlsZChlZGl0QnRuKTtcblxuICAgIGVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlZGl0QnRuLnZhbHVlID0gXCJTQVZFXCI7XG4gICAgICB0aXRsZS5yZWFkT25seSA9IGZhbHNlO1xuICAgICAgdGl0bGUuY2xhc3NMaXN0LnRvZ2dsZShcImVkaXRcIik7XG4gICAgICBkZXNjcmlwdGlvbi5yZWFkT25seSA9IGZhbHNlO1xuICAgICAgZGVzY3JpcHRpb24uY2xhc3NMaXN0LnRvZ2dsZShcImVkaXRcIik7XG4gICAgICBkYXRlLnJlYWRPbmx5ID0gZmFsc2U7XG4gICAgICBkYXRlLmNsYXNzTGlzdC50b2dnbGUoXCJlZGl0XCIpO1xuXG4gICAgICBlZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZWRpdEJ0bi52YWx1ZSA9IFwiRURJVFwiO1xuICAgICAgICB0aXRsZS5yZWFkT25seSA9IHRydWU7XG4gICAgICAgIHRpdGxlLmNsYXNzTGlzdC50b2dnbGUoXCJlZGl0XCIpO1xuICAgICAgICBkZXNjcmlwdGlvbi5yZWFkT25seSA9IHRydWU7XG4gICAgICAgIGRlc2NyaXB0aW9uLmNsYXNzTGlzdC50b2dnbGUoXCJlZGl0XCIpO1xuICAgICAgICBkYXRlLnJlYWRPbmx5ID0gdHJ1ZTtcbiAgICAgICAgZGF0ZS5jbGFzc0xpc3QudG9nZ2xlKFwiZWRpdFwiKTtcbiAgICAgICAgY29uc3QgZGF0YSA9IHBhcnNlTG9jYWxTdG9yYWdlKCk7XG4gICAgICAgIGRhdGFbdGhpcy5pZF0udGFzayA9IHRhc2tGb3JtLnRhc2tUaXRsZS52YWx1ZTtcbiAgICAgICAgZGF0YVt0aGlzLmlkXS5kZXNjcmlwdGlvbiA9IHRhc2tGb3JtLnRhc2tEZXNjcmlwdGlvbi52YWx1ZTtcbiAgICAgICAgZGF0YVt0aGlzLmlkXS5kYXRlID0gdGFza0Zvcm0udGFza0RhdGUudmFsdWU7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9Eb3NcIiwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgICByZW5kZXIoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIC8vIHRhc2sgZGVsZXRlIGJ1dHRvbiBhbmQgZnVuY3Rpb25zXG4gICAgY29uc3QgZGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSBcIkRFTFwiO1xuICAgIGRlbGV0ZUJ0bi5jbGFzc0xpc3QuYWRkKFwiZGVsZXRlLWJ1dHRvblwiKTtcbiAgICB0YXNrRm9ybS5hcHBlbmRDaGlsZChkZWxldGVCdG4pO1xuXG4gICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZGVsKSA9PiB7XG4gICAgICBkZWwucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBwYXJzZUxvY2FsU3RvcmFnZSgpO1xuICAgICAgZGF0YS5zcGxpY2UodGhpcy5pZCwgMSk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRhc2stY29udGFpbmVyXCIpW3RoaXMuaWRdLnJlbW92ZSgpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b0Rvc1wiLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgICByZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxufVxuLy8gc2F2ZSBuZXcgdGFzayB0byB0aGUgbG9jYUwgc3RvcmFnZVxuZnVuY3Rpb24gc2F2ZVRvRG8oZm9ybSkge1xuICBjb25zdCB0b0RvcyA9IHBhcnNlTG9jYWxTdG9yYWdlKCk7XG4gIGNvbnN0IHRvRG8gPSB7XG4gICAgdGFzazogZm9ybS50YXNrLnZhbHVlLFxuICAgIGRlc2NyaXB0aW9uOiBmb3JtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgIGRhdGU6IGZvcm0uZGF0dW0udmFsdWUsXG4gICAgY29tcGxldGVkOiBmYWxzZSxcbiAgICBwcm9qZWN0OiBcIkluYm94XCIsXG4gIH07XG4gIHRvRG9zLnB1c2godG9Ebyk7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9Eb3NcIiwgSlNPTi5zdHJpbmdpZnkodG9Eb3MpKTtcbn1cblxuZXhwb3J0IHsgc2F2ZVRvRG8sIFRhc2ssIHJlbmRlciB9O1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvamVjdHMge1xuICBzdGF0aWMgcHJvamVjdHMgPSBbXG4gICAge1xuICAgICAgbmFtZTogXCJJbmJveFwiLFxuICAgICAgcHJvdGVjdGVkOiB0cnVlLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJUb2RheVwiLFxuICAgICAgcHJvdGVjdGVkOiB0cnVlLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJMYXRlXCIsXG4gICAgICBwcm90ZWN0ZWQ6IHRydWUsXG4gICAgfSxcbiAgXTtcblxuICBzdGF0aWMgcmVuZGVyUHJvamVjdHMoKSB7XG4gICAgY29uc3QgaXRlbXMgPSB0aGlzLnBhcnNlUHJvamVjdHMoKTtcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLmNyZWF0ZVByb2plY3QoaXRlbSk7XG4gICAgfSk7XG4gICAgLy8gdGhpcy5uZXdQcm9qZWN0KHsgbmFtZTogXCJEdW1teVwiLCBwcm90ZWN0ZWQ6IGZhbHNlIH0pO1xuICB9XG5cbiAgc3RhdGljIHBhcnNlUHJvamVjdHMoKSB7XG4gICAgbGV0IGl0ZW1zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInByb2plY3RMaXN0XCIpKSB8fCBbXTtcbiAgICBpZiAoaXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBpdGVtcyA9IHRoaXMucHJvamVjdHM7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RMaXN0XCIsIEpTT04uc3RyaW5naWZ5KGl0ZW1zKSk7XG4gICAgfVxuICAgIHJldHVybiBpdGVtcztcbiAgfVxuXG4gIHN0YXRpYyBzYXZlUHJvamVjdHMoaXRlbSkge1xuICAgIGNvbnN0IGl0ZW1zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInByb2plY3RMaXN0XCIpKTtcbiAgICBpdGVtcy5wdXNoKGl0ZW0pO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdExpc3RcIiwgSlNPTi5zdHJpbmdpZnkoaXRlbXMpKTtcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVQcm9qZWN0KGl0ZW0pIHtcbiAgICBjb25zdCBwcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWNvbnRhaW5lclwiKTtcbiAgICBjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgcHJvamVjdC50ZXh0Q29udGVudCA9IGl0ZW0ubmFtZTtcbiAgICBwcm9qZWN0LmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0XCIpO1xuICAgIHByb2plY3Quc2V0QXR0cmlidXRlKFwiaWRcIiwgaXRlbS5uYW1lKTtcbiAgICBwcm9qZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHByb2plY3QpO1xuICAgIHByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHByb2plY3QpO1xuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIG5ld1Byb2plY3QoaXRlbSkge1xuICAgIHRoaXMuY3JlYXRlUHJvamVjdChpdGVtKTtcbiAgICB0aGlzLnNhdmVQcm9qZWN0cyhpdGVtKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgc2F2ZVRvRG8sIHJlbmRlciB9IGZyb20gXCIuL3RvZG9cIjtcbmltcG9ydCBQcm9qZWN0cyBmcm9tIFwiLi9wcm9qZWN0c1wiO1xuXG4vLyBmdW5jdGlvbiBmb3IgY2FuY2VsIGJ1dHRvblxuZnVuY3Rpb24gY2FuY2VsQnV0dG9uKCkge1xuICBjb25zdCBjYW5jZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhbmNlbFwiKTtcbiAgY2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLWNvbnRhaW5lclwiKTtcbiAgICAvLyBjb25zb2xlLmxvZyhcImRvbmVcIik7XG4gICAgZm9ybUNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpO1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG4gICAgLy8gc2V0IHZhbHVlcyB0byBkZWZhdWx0XG4gICAgZm9ybS50YXNrLnZhbHVlID0gXCJcIjtcbiAgICBmb3JtLmRlc2NyaXB0aW9uLnZhbHVlID0gXCJcIjtcbiAgICBmb3JtLmRhdHVtLnZhbHVlID0gXCJcIjtcbiAgfSk7XG59XG5cbi8vIGZ1bmN0aW9uIGZvciBhZGQgYnV0dG9uXG5mdW5jdGlvbiBhZGRCdXR0b24oKSB7XG4gIGNvbnN0IGFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc3VibWl0XCIpO1xuICBhZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGZvcm1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tY29udGFpbmVyXCIpO1xuICAgIGZvcm1Db250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKTtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xuICAgIHNhdmVUb0RvKGZvcm0pO1xuICAgIC8vIHNldCB2YWx1ZXMgdG8gZGVmYXVsdFxuICAgIGZvcm0udGFzay52YWx1ZSA9IFwiXCI7XG4gICAgZm9ybS5kZXNjcmlwdGlvbi52YWx1ZSA9IFwiXCI7XG4gICAgZm9ybS5kYXR1bS52YWx1ZSA9IFwiXCI7XG4gICAgcmVuZGVyKCk7XG4gIH0pO1xufVxuXG4vLyBmdW5jdGlvbiBmb3IgbmV3IGJ1dHRvblxuZnVuY3Rpb24gbmV3QnV0dG9uKCkge1xuICBjb25zdCBuZXdCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ldy1idXR0b25cIik7XG4gIG5ld0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNvbnN0IGZvcm1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tY29udGFpbmVyXCIpO1xuICAgIGZvcm1Db250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKTtcbiAgfSk7XG59XG5cbi8vIGZ1bmN0aW9uIGZvciBwcm9qZWN0IGJ1dHRvblxuZnVuY3Rpb24gYWRkUHJvamVjdCgpIHtcbiAgY29uc3QgcHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1idXR0b25cIik7XG4gIHByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IHByb21wdChcIlBsZWFzZSBlbnRlciBhIHByb2plY3QgbmFtZTpcIiwgXCJOZXcgUHJvamVjdFwiKTtcbiAgICBjb25zdCBwcm9qZWN0T2JqID0ge1xuICAgICAgbmFtZTogcHJvamVjdE5hbWUsXG4gICAgICBwcm90ZWN0ZWQ6IGZhbHNlLFxuICAgIH07XG4gICAgUHJvamVjdHMubmV3UHJvamVjdChwcm9qZWN0T2JqKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGJ1dHRvbkZ1bmN0aW9ucygpIHtcbiAgY2FuY2VsQnV0dG9uKCk7XG4gIGFkZEJ1dHRvbigpO1xuICBuZXdCdXR0b24oKTtcbiAgYWRkUHJvamVjdCgpO1xufVxuIiwiaW1wb3J0IGNyZWF0ZVN0cnVjdHVyZSBmcm9tIFwiLi9tb2R1bGVzL3VpXCI7XG5pbXBvcnQgYnV0dG9uRnVuY3Rpb25zIGZyb20gXCIuL21vZHVsZXMvYnV0dG9uLWZ1bmN0aW9uc1wiO1xuaW1wb3J0IHsgcmVuZGVyIH0gZnJvbSBcIi4vbW9kdWxlcy90b2RvXCI7XG5pbXBvcnQgUHJvamVjdHMgZnJvbSBcIi4vbW9kdWxlcy9wcm9qZWN0c1wiO1xuXG5jcmVhdGVTdHJ1Y3R1cmUoKTtcbmJ1dHRvbkZ1bmN0aW9ucygpO1xucmVuZGVyKCk7XG5Qcm9qZWN0cy5yZW5kZXJQcm9qZWN0cygpO1xuIl0sIm5hbWVzIjpbImJvZHkiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwYXJzZUxvY2FsU3RvcmFnZSIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJyZW5kZXIiLCJ0ZXh0Q29udGVudCIsImZvckVhY2giLCJpdGVtIiwiaWQiLCJUYXNrIiwidGFzayIsImRlc2NyaXB0aW9uIiwiZGF0ZSIsImNvbXBsZXRlZCIsInByb2plY3QiLCJjb25zdHJ1Y3RvciIsInRpdGxlIiwidGhpcyIsImNyZWF0ZVRhc2tDb250YWluZXIiLCJpbmJveCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJhcHBlbmRDaGlsZCIsInRhc2tGb3JtIiwicmVhZE9ubHkiLCJ2YWx1ZSIsImVkaXRCdG4iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwidG9nZ2xlIiwiZXZlbnQiLCJkYXRhIiwidGFza1RpdGxlIiwidGFza0Rlc2NyaXB0aW9uIiwidGFza0RhdGUiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiZGVsZXRlQnRuIiwiZGVsIiwic3BsaWNlIiwicXVlcnlTZWxlY3RvckFsbCIsInJlbW92ZSIsIlByb2plY3RzIiwic3RhdGljIiwibmFtZSIsInByb3RlY3RlZCIsInBhcnNlUHJvamVjdHMiLCJjcmVhdGVQcm9qZWN0IiwiaXRlbXMiLCJsZW5ndGgiLCJwcm9qZWN0cyIsInB1c2giLCJwcm9qZWN0Q29udGFpbmVyIiwiY29uc29sZSIsImxvZyIsInNhdmVQcm9qZWN0cyIsImRpdiIsIm5ld0J1dHRvbiIsImFkZFByb2plY3RCdXR0b24iLCJjcmVhdGVTaWRlYmFyIiwiY3JlYXRlVG9kbyIsImNvbnRhaW5lciIsIm1haW4iLCJmb3JtIiwidGFza0xhYmVsIiwiZGVzY3JpcHRpb25MYWJlbCIsImRhdHVtTGFiZWwiLCJkYXR1bSIsInNlbGVjdCIsIm9wdGlvbkRlZmF1bHQiLCJhZGRCdXR0b24iLCJjYW5jZWxCdXR0b24iLCJjcmVhdGVGb3JtIiwidG9Eb3MiLCJ0b0RvIiwic2F2ZVRvRG8iLCJwcm9qZWN0T2JqIiwicHJvbXB0IiwibmV3UHJvamVjdCIsInJlbmRlclByb2plY3RzIl0sInNvdXJjZVJvb3QiOiIifQ==