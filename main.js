(()=>{"use strict";const t=document.querySelector("body");function e(){return JSON.parse(localStorage.getItem("toDos"))||[]}function s(){document.querySelector(".todo").textContent="",e().forEach(((t,e)=>{new n(e,t.task,t.description,t.date,t.completed)}))}class n{constructor(t,e,s,n,a){this.id=t,this.title=e,this.description=s,this.date=n,this.completed=a,this.#t()}createTaskContainer(t){const e=document.createElement("div");return e.classList.add("task-container"),e.setAttribute("id",this.id),t.appendChild(e),e}#t(){const t=document.querySelector(".todo"),n=this.createTaskContainer(t),a=document.createElement("form");a.classList.add("task-form"),n.appendChild(a);const c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("name","taskTitle"),c.readOnly=!0,c.value=this.title,c.classList.add("task-title"),a.appendChild(c);const i=document.createElement("textarea");i.setAttribute("name","taskDescription"),i.readOnly=!0,i.value=this.description,i.classList.add("task-description"),a.appendChild(i);const d=document.createElement("input");d.setAttribute("type","date"),d.setAttribute("name","taskDate"),d.readOnly=!0,d.value=this.date,d.classList.add("task-date"),a.appendChild(d);const o=document.createElement("input");o.setAttribute("type","submit"),o.value="EDIT",o.classList.add("edit-button"),a.appendChild(o),o.addEventListener("click",(t=>{t.preventDefault(),o.value="SAVE",c.readOnly=!1,c.classList.toggle("edit"),i.readOnly=!1,i.classList.toggle("edit"),d.readOnly=!1,d.classList.toggle("edit"),o.addEventListener("click",(t=>{t.preventDefault(),o.value="EDIT",c.readOnly=!0,c.classList.toggle("edit"),i.readOnly=!0,i.classList.toggle("edit"),d.readOnly=!0,d.classList.toggle("edit");const n=e();n[this.id].task=a.taskTitle.value,n[this.id].description=a.taskDescription.value,n[this.id].date=a.taskDate.value,localStorage.setItem("toDos",JSON.stringify(n)),s()}))}));const r=document.createElement("button");r.textContent="DEL",r.classList.add("delete-button"),a.appendChild(r),r.addEventListener("click",(t=>{t.preventDefault();const n=e();n.splice(this.id,1),document.querySelectorAll(".task-container")[this.id].remove(),localStorage.setItem("toDos",JSON.stringify(n)),s()}))}}!function(){const e=document.createElement("div");e.classList.add("sidebar"),t.appendChild(e);const s=document.createElement("button");s.classList.add("new-button"),s.textContent="Create Task",e.appendChild(s);const n=document.createElement("div");n.classList.add("project-container"),e.appendChild(n)}(),function(){const e=document.createElement("div");e.classList.add("todo"),t.appendChild(e)}(),function(){const e=document.createElement("div");e.classList.add("form-container"),e.classList.add("hidden"),t.appendChild(e);const s=document.createElement("div");s.classList.add("form-main"),e.appendChild(s);const n=document.createElement("form");n.classList.add("form"),s.appendChild(n);const a=document.createElement("label");a.setAttribute("for","task"),a.textContent="Task Title",n.appendChild(a);const c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("id","task"),c.setAttribute("name","task"),c.setAttribute("placeholder","e.g. walk the dog"),c.setAttribute("required",""),n.appendChild(c);const i=document.createElement("label");i.setAttribute("for","description"),i.textContent="Description",n.appendChild(i);const d=document.createElement("textarea");d.setAttribute("id","description"),d.setAttribute("name","description"),d.setAttribute("rows","6"),d.setAttribute("maxlength","200"),n.appendChild(d);const o=document.createElement("label");o.setAttribute("for","datum"),o.textContent="Due date",n.appendChild(o);const r=document.createElement("input");r.setAttribute("type","date"),r.setAttribute("id","datum"),r.setAttribute("name","datum"),n.appendChild(r);const l=document.createElement("input");l.setAttribute("type","submit"),l.setAttribute("id","submit"),l.setAttribute("value","Add"),n.appendChild(l);const u=document.createElement("button");u.setAttribute("id","cancel"),u.textContent="Cancel",n.appendChild(u)}(),document.querySelector("#cancel").addEventListener("click",(t=>{t.preventDefault(),document.querySelector(".form-container").classList.toggle("hidden");const e=document.querySelector(".form");e.task.value="",e.description.value="",e.datum.value=""})),document.querySelector("#submit").addEventListener("click",(t=>{t.preventDefault(),document.querySelector(".form-container").classList.toggle("hidden");const n=document.querySelector(".form");!function(t){const s=e(),n={task:t.task.value,description:t.description.value,date:t.datum.value,completed:!1};s.push(n),localStorage.setItem("toDos",JSON.stringify(s))}(n),n.task.value="",n.description.value="",n.datum.value="",s()})),document.querySelector(".new-button").addEventListener("click",(()=>{document.querySelector(".form-container").classList.toggle("hidden")})),s(),class{static projects=[{name:"Inbox",protected:!0},{name:"Today",protected:!0},{name:"Late",protected:!0}];static renderProjects(){this.parseProjects().forEach((t=>{this.createProject(t)}))}static parseProjects(){let t=JSON.parse(localStorage.getItem("projectList"))||[];return 0===t.length&&(t=this.projects,localStorage.setItem("projectList",JSON.stringify(t))),t}static saveProjects(t){const e=JSON.parse(localStorage.getItem("projectList"));e.push(t),localStorage.setItem("projectList",JSON.stringify(e))}static createProject(t){const e=document.querySelector(".project-container"),s=document.createElement("p");s.textContent=t.name,s.classList.add("project"),s.setAttribute("id",t.name),e.appendChild(s)}static newProject(t){this.createProject(t),this.saveProjects(t)}}.renderProjects()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNiMkQsZ0JBQWtCLENBQ2hCLENBQ0VDLEtBQU0sUUFDTkMsV0FBVyxHQUViLENBQ0VELEtBQU0sUUFDTkMsV0FBVyxHQUViLENBQ0VELEtBQU0sT0FDTkMsV0FBVyxJQUlmRix3QkFDZ0IvQyxLQUFLa0QsZ0JBQ2I1RCxTQUFTQyxJQUNiUyxLQUFLbUQsY0FBYzVELEVBQUssR0FHNUIsQ0FFQXdELHVCQUNFLElBQUlLLEVBQVFwRSxLQUFLQyxNQUFNQyxhQUFhQyxRQUFRLGlCQUFtQixHQUsvRCxPQUpxQixJQUFqQmlFLEVBQU1DLFNBQ1JELEVBQVFwRCxLQUFLc0QsU0FDYnBFLGFBQWFtQyxRQUFRLGNBQWVyQyxLQUFLc0MsVUFBVThCLEtBRTlDQSxDQUNULENBRUFMLG9CQUFvQnhELEdBQ2xCLE1BQU02RCxFQUFRcEUsS0FBS0MsTUFBTUMsYUFBYUMsUUFBUSxnQkFDOUNpRSxFQUFNUCxLQUFLdEQsR0FDWEwsYUFBYW1DLFFBQVEsY0FBZXJDLEtBQUtzQyxVQUFVOEIsR0FDckQsQ0FFQUwscUJBQXFCeEQsR0FDbkIsTUFBTXVDLEVBQW1CakQsU0FBU0MsY0FBYyxzQkFDMUN5RSxFQUFVMUUsU0FBU3NCLGNBQWMsS0FDdkNvRCxFQUFRbEUsWUFBY0UsRUFBS3lELEtBQzNCTyxFQUFRbkQsVUFBVUMsSUFBSSxXQUN0QmtELEVBQVFqRCxhQUFhLEtBQU1mLEVBQUt5RCxNQUNoQ2xCLEVBQWlCdkIsWUFBWWdELEVBQy9CLENBRUFSLGtCQUFrQnhELEdBQ2hCUyxLQUFLbUQsY0FBYzVELEdBQ25CUyxLQUFLd0QsYUFBYWpFLEVBQ3BCLEdEM0NPa0UsZ0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9tb2R1bGVzL3VpLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL21vZHVsZXMvdG9kby5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9tb2R1bGVzL2J1dHRvbi1mdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvbW9kdWxlcy9wcm9qZWN0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIik7XG5cbi8vIGZ1bmN0aW9uIGNyZWF0ZUhlYWRlcigpIHtcbi8vICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbi8vICAgZGl2LmNsYXNzTGlzdC5hZGQoXCJoZWFkZXJcIik7XG4vLyAgIGJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcbi8vIH1cblxuZnVuY3Rpb24gY3JlYXRlVG9kbygpIHtcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgZGl2LmNsYXNzTGlzdC5hZGQoXCJ0b2RvXCIpO1xuICBib2R5LmFwcGVuZENoaWxkKGRpdik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNpZGViYXIoKSB7XG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGRpdi5jbGFzc0xpc3QuYWRkKFwic2lkZWJhclwiKTtcbiAgYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuXG4gIGNvbnN0IG5ld0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gIG5ld0J1dHRvbi5jbGFzc0xpc3QuYWRkKFwibmV3LWJ1dHRvblwiKTtcbiAgbmV3QnV0dG9uLnRleHRDb250ZW50ID0gXCJDcmVhdGUgVGFza1wiO1xuICBkaXYuYXBwZW5kQ2hpbGQobmV3QnV0dG9uKTtcblxuICBjb25zdCBwcm9qZWN0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgcHJvamVjdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC1jb250YWluZXJcIik7XG4gIGRpdi5hcHBlbmRDaGlsZChwcm9qZWN0Q29udGFpbmVyKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRm9ybSgpIHtcbiAgLy8gYWRkIGNvbnRhaW5lciBkaXZcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJmb3JtLWNvbnRhaW5lclwiKTtcbiAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gIGJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgLy8gYWRkIGNvbnRhaW5lciBkaXZcbiAgY29uc3QgbWFpbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIG1haW4uY2xhc3NMaXN0LmFkZChcImZvcm0tbWFpblwiKTtcbiAgLy8gY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChtYWluKTtcblxuICAvLyBhZGQgZm9ybVxuICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7XG4gIGZvcm0uY2xhc3NMaXN0LmFkZChcImZvcm1cIik7XG4gIG1haW4uYXBwZW5kQ2hpbGQoZm9ybSk7XG5cbiAgLy8gYWRkIHRhc2sgbmFtZVxuICBjb25zdCB0YXNrTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gIHRhc2tMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJ0YXNrXCIpO1xuICB0YXNrTGFiZWwudGV4dENvbnRlbnQgPSBcIlRhc2sgVGl0bGVcIjtcbiAgZm9ybS5hcHBlbmRDaGlsZCh0YXNrTGFiZWwpO1xuICBjb25zdCB0YXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICB0YXNrLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICB0YXNrLnNldEF0dHJpYnV0ZShcImlkXCIsIFwidGFza1wiKTtcbiAgdGFzay5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwidGFza1wiKTtcbiAgdGFzay5zZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCBcImUuZy4gd2FsayB0aGUgZG9nXCIpO1xuICB0YXNrLnNldEF0dHJpYnV0ZShcInJlcXVpcmVkXCIsIFwiXCIpO1xuICBmb3JtLmFwcGVuZENoaWxkKHRhc2spO1xuXG4gIC8vIGFkZCBkZXNjcmlwdGlvblxuICBjb25zdCBkZXNjcmlwdGlvbkxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICBkZXNjcmlwdGlvbkxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcImRlc2NyaXB0aW9uXCIpO1xuICBkZXNjcmlwdGlvbkxhYmVsLnRleHRDb250ZW50ID0gXCJEZXNjcmlwdGlvblwiO1xuICBmb3JtLmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uTGFiZWwpO1xuICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcbiAgZGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJkZXNjcmlwdGlvblwiKTtcbiAgZGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcImRlc2NyaXB0aW9uXCIpO1xuICBkZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoXCJyb3dzXCIsIFwiNlwiKTtcbiAgZGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKFwibWF4bGVuZ3RoXCIsIFwiMjAwXCIpO1xuICBmb3JtLmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKTtcblxuICAvLyBhZGQgZGF0ZVxuICBjb25zdCBkYXR1bUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICBkYXR1bUxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcImRhdHVtXCIpO1xuICBkYXR1bUxhYmVsLnRleHRDb250ZW50ID0gXCJEdWUgZGF0ZVwiO1xuICBmb3JtLmFwcGVuZENoaWxkKGRhdHVtTGFiZWwpO1xuICBjb25zdCBkYXR1bSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgZGF0dW0uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImRhdGVcIik7XG4gIGRhdHVtLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZGF0dW1cIik7XG4gIGRhdHVtLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJkYXR1bVwiKTtcbiAgZm9ybS5hcHBlbmRDaGlsZChkYXR1bSk7XG4gIC8vIGFkZCBidXR0b25cbiAgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICBhZGRCdXR0b24uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInN1Ym1pdFwiKTtcbiAgYWRkQnV0dG9uLnNldEF0dHJpYnV0ZShcImlkXCIsIFwic3VibWl0XCIpO1xuICBhZGRCdXR0b24uc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJBZGRcIik7XG4gIGZvcm0uYXBwZW5kQ2hpbGQoYWRkQnV0dG9uKTtcbiAgLy8gY2FuY2VsIGJ1dHRvblxuICBjb25zdCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBjYW5jZWxCdXR0b24uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJjYW5jZWxcIik7XG4gIGNhbmNlbEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQ2FuY2VsXCI7XG4gIGZvcm0uYXBwZW5kQ2hpbGQoY2FuY2VsQnV0dG9uKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlU3RydWN0dXJlKCkge1xuICBjcmVhdGVTaWRlYmFyKCk7XG4gIC8vIGNyZWF0ZUhlYWRlcigpO1xuICBjcmVhdGVUb2RvKCk7XG4gIGNyZWF0ZUZvcm0oKTtcbn1cbiIsIi8vIGdldCBpdGVtcyBmcm9tIGxvY2FsIHN0b3JhZ2VcbmZ1bmN0aW9uIHBhcnNlTG9jYWxTdG9yYWdlKCkge1xuICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRvRG9zXCIpKSB8fCBbXTtcbn1cbi8vIHJlbmRlciB0YXNrcyBmcm9tIGxvY2FsIHN0b3JhZ2VcbmZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgY29uc3QgaW5ib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9cIik7XG4gIGluYm94LnRleHRDb250ZW50ID0gXCJcIjtcbiAgY29uc3QgdG9Eb3MgPSBwYXJzZUxvY2FsU3RvcmFnZSgpO1xuICB0b0Rvcy5mb3JFYWNoKChpdGVtLCBpZCkgPT4ge1xuICAgICgoKSA9PlxuICAgICAgbmV3IFRhc2soaWQsIGl0ZW0udGFzaywgaXRlbS5kZXNjcmlwdGlvbiwgaXRlbS5kYXRlLCBpdGVtLmNvbXBsZXRlZCkpKCk7XG4gIH0pO1xufVxuLy8gY3JlYXRlIHRhc2tzXG5jbGFzcyBUYXNrIHtcbiAgY29uc3RydWN0b3IoaWQsIHRpdGxlLCBkZXNjcmlwdGlvbiwgZGF0ZSwgY29tcGxldGVkKSB7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgdGhpcy5kYXRlID0gZGF0ZTtcbiAgICB0aGlzLmNvbXBsZXRlZCA9IGNvbXBsZXRlZDtcbiAgICB0aGlzLiNjcmVhdGUoKTtcbiAgfVxuXG4gIGNyZWF0ZVRhc2tDb250YWluZXIoaW5ib3gpIHtcbiAgICAvLyB0YXNrIGNvbnRhaW5lclxuICAgIGNvbnN0IHRhc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRhc2suY2xhc3NMaXN0LmFkZChcInRhc2stY29udGFpbmVyXCIpO1xuICAgIHRhc2suc2V0QXR0cmlidXRlKFwiaWRcIiwgdGhpcy5pZCk7XG4gICAgaW5ib3guYXBwZW5kQ2hpbGQodGFzayk7XG4gICAgcmV0dXJuIHRhc2s7XG4gIH1cblxuICAvLyBjcmVhdGUgdGFzayB1aSBhbmQgZnVuY3Rpb25zXG4gICNjcmVhdGUoKSB7XG4gICAgY29uc3QgaW5ib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9cIik7XG4gICAgLy8gdGFzayBjb250YWluZXJcbiAgICBjb25zdCB0YXNrID0gdGhpcy5jcmVhdGVUYXNrQ29udGFpbmVyKGluYm94KTtcbiAgICAvLyB0YXNrIGZvcm1cbiAgICBjb25zdCB0YXNrRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpO1xuICAgIHRhc2tGb3JtLmNsYXNzTGlzdC5hZGQoXCJ0YXNrLWZvcm1cIik7XG4gICAgdGFzay5hcHBlbmRDaGlsZCh0YXNrRm9ybSk7XG4gICAgLy8gdGFzayB0aXRsZVxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIHRpdGxlLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgIHRpdGxlLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJ0YXNrVGl0bGVcIik7XG4gICAgdGl0bGUucmVhZE9ubHkgPSB0cnVlO1xuICAgIHRpdGxlLnZhbHVlID0gdGhpcy50aXRsZTtcbiAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKFwidGFzay10aXRsZVwiKTtcbiAgICB0YXNrRm9ybS5hcHBlbmRDaGlsZCh0aXRsZSk7XG4gICAgLy8gdGFzayBkZXNjcmlwdGlvblxuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuICAgIGRlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJ0YXNrRGVzY3JpcHRpb25cIik7XG4gICAgZGVzY3JpcHRpb24ucmVhZE9ubHkgPSB0cnVlO1xuICAgIGRlc2NyaXB0aW9uLnZhbHVlID0gdGhpcy5kZXNjcmlwdGlvbjtcbiAgICBkZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKFwidGFzay1kZXNjcmlwdGlvblwiKTtcbiAgICB0YXNrRm9ybS5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbik7XG4gICAgLy8gdGFzayBkYXRlXG4gICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBkYXRlLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJkYXRlXCIpO1xuICAgIGRhdGUuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcInRhc2tEYXRlXCIpO1xuICAgIGRhdGUucmVhZE9ubHkgPSB0cnVlO1xuICAgIGRhdGUudmFsdWUgPSB0aGlzLmRhdGU7XG4gICAgZGF0ZS5jbGFzc0xpc3QuYWRkKFwidGFzay1kYXRlXCIpO1xuICAgIHRhc2tGb3JtLmFwcGVuZENoaWxkKGRhdGUpO1xuICAgIC8vIHRhc2sgZWRpdCBidXR0b24gYW5kIGZ1bmN0aW9uc1xuICAgIGNvbnN0IGVkaXRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgZWRpdEJ0bi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwic3VibWl0XCIpO1xuICAgIGVkaXRCdG4udmFsdWUgPSBcIkVESVRcIjtcbiAgICBlZGl0QnRuLmNsYXNzTGlzdC5hZGQoXCJlZGl0LWJ1dHRvblwiKTtcbiAgICB0YXNrRm9ybS5hcHBlbmRDaGlsZChlZGl0QnRuKTtcblxuICAgIGVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlZGl0QnRuLnZhbHVlID0gXCJTQVZFXCI7XG4gICAgICB0aXRsZS5yZWFkT25seSA9IGZhbHNlO1xuICAgICAgdGl0bGUuY2xhc3NMaXN0LnRvZ2dsZShcImVkaXRcIik7XG4gICAgICBkZXNjcmlwdGlvbi5yZWFkT25seSA9IGZhbHNlO1xuICAgICAgZGVzY3JpcHRpb24uY2xhc3NMaXN0LnRvZ2dsZShcImVkaXRcIik7XG4gICAgICBkYXRlLnJlYWRPbmx5ID0gZmFsc2U7XG4gICAgICBkYXRlLmNsYXNzTGlzdC50b2dnbGUoXCJlZGl0XCIpO1xuXG4gICAgICBlZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZWRpdEJ0bi52YWx1ZSA9IFwiRURJVFwiO1xuICAgICAgICB0aXRsZS5yZWFkT25seSA9IHRydWU7XG4gICAgICAgIHRpdGxlLmNsYXNzTGlzdC50b2dnbGUoXCJlZGl0XCIpO1xuICAgICAgICBkZXNjcmlwdGlvbi5yZWFkT25seSA9IHRydWU7XG4gICAgICAgIGRlc2NyaXB0aW9uLmNsYXNzTGlzdC50b2dnbGUoXCJlZGl0XCIpO1xuICAgICAgICBkYXRlLnJlYWRPbmx5ID0gdHJ1ZTtcbiAgICAgICAgZGF0ZS5jbGFzc0xpc3QudG9nZ2xlKFwiZWRpdFwiKTtcbiAgICAgICAgY29uc3QgZGF0YSA9IHBhcnNlTG9jYWxTdG9yYWdlKCk7XG4gICAgICAgIGRhdGFbdGhpcy5pZF0udGFzayA9IHRhc2tGb3JtLnRhc2tUaXRsZS52YWx1ZTtcbiAgICAgICAgZGF0YVt0aGlzLmlkXS5kZXNjcmlwdGlvbiA9IHRhc2tGb3JtLnRhc2tEZXNjcmlwdGlvbi52YWx1ZTtcbiAgICAgICAgZGF0YVt0aGlzLmlkXS5kYXRlID0gdGFza0Zvcm0udGFza0RhdGUudmFsdWU7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9Eb3NcIiwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgICByZW5kZXIoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIC8vIHRhc2sgZGVsZXRlIGJ1dHRvbiBhbmQgZnVuY3Rpb25zXG4gICAgY29uc3QgZGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSBcIkRFTFwiO1xuICAgIGRlbGV0ZUJ0bi5jbGFzc0xpc3QuYWRkKFwiZGVsZXRlLWJ1dHRvblwiKTtcbiAgICB0YXNrRm9ybS5hcHBlbmRDaGlsZChkZWxldGVCdG4pO1xuXG4gICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZGVsKSA9PiB7XG4gICAgICBkZWwucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBwYXJzZUxvY2FsU3RvcmFnZSgpO1xuICAgICAgZGF0YS5zcGxpY2UodGhpcy5pZCwgMSk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRhc2stY29udGFpbmVyXCIpW3RoaXMuaWRdLnJlbW92ZSgpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b0Rvc1wiLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgICByZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxufVxuLy8gc2F2ZSBuZXcgdGFzayB0byB0aGUgbG9jYUwgc3RvcmFnZVxuZnVuY3Rpb24gc2F2ZVRvRG8oZm9ybSkge1xuICBjb25zdCB0b0RvcyA9IHBhcnNlTG9jYWxTdG9yYWdlKCk7XG4gIGNvbnN0IHRvRG8gPSB7XG4gICAgdGFzazogZm9ybS50YXNrLnZhbHVlLFxuICAgIGRlc2NyaXB0aW9uOiBmb3JtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgIGRhdGU6IGZvcm0uZGF0dW0udmFsdWUsXG4gICAgY29tcGxldGVkOiBmYWxzZSxcbiAgfTtcbiAgdG9Eb3MucHVzaCh0b0RvKTtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b0Rvc1wiLCBKU09OLnN0cmluZ2lmeSh0b0RvcykpO1xufVxuXG5leHBvcnQgeyBzYXZlVG9EbywgVGFzaywgcmVuZGVyIH07XG4iLCJpbXBvcnQgeyBzYXZlVG9EbywgcmVuZGVyIH0gZnJvbSBcIi4vdG9kb1wiO1xuXG4vLyBmdW5jdGlvbiBmb3IgY2FuY2VsIGJ1dHRvblxuZnVuY3Rpb24gY2FuY2VsQnV0dG9uKCkge1xuICBjb25zdCBjYW5jZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhbmNlbFwiKTtcbiAgY2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLWNvbnRhaW5lclwiKTtcbiAgICAvLyBjb25zb2xlLmxvZyhcImRvbmVcIik7XG4gICAgZm9ybUNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpO1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG4gICAgLy8gc2V0IHZhbHVlcyB0byBkZWZhdWx0XG4gICAgZm9ybS50YXNrLnZhbHVlID0gXCJcIjtcbiAgICBmb3JtLmRlc2NyaXB0aW9uLnZhbHVlID0gXCJcIjtcbiAgICBmb3JtLmRhdHVtLnZhbHVlID0gXCJcIjtcbiAgfSk7XG59XG5cbi8vIGZ1bmN0aW9uIGZvciBhZGQgYnV0dG9uXG5mdW5jdGlvbiBhZGRCdXR0b24oKSB7XG4gIGNvbnN0IGFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc3VibWl0XCIpO1xuICBhZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGZvcm1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tY29udGFpbmVyXCIpO1xuICAgIGZvcm1Db250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKTtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xuICAgIHNhdmVUb0RvKGZvcm0pO1xuICAgIC8vIHNldCB2YWx1ZXMgdG8gZGVmYXVsdFxuICAgIGZvcm0udGFzay52YWx1ZSA9IFwiXCI7XG4gICAgZm9ybS5kZXNjcmlwdGlvbi52YWx1ZSA9IFwiXCI7XG4gICAgZm9ybS5kYXR1bS52YWx1ZSA9IFwiXCI7XG4gICAgcmVuZGVyKCk7XG4gIH0pO1xufVxuXG4vLyBmdW5jdGlvbiBmb3IgbmV3IGJ1dHRvblxuZnVuY3Rpb24gbmV3QnV0dG9uKCkge1xuICBjb25zdCBuZXdCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ldy1idXR0b25cIik7XG4gIG5ld0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNvbnN0IGZvcm1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tY29udGFpbmVyXCIpO1xuICAgIGZvcm1Db250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGJ1dHRvbkZ1bmN0aW9ucygpIHtcbiAgY2FuY2VsQnV0dG9uKCk7XG4gIGFkZEJ1dHRvbigpO1xuICBuZXdCdXR0b24oKTtcbn1cbiIsImltcG9ydCBjcmVhdGVTdHJ1Y3R1cmUgZnJvbSBcIi4vbW9kdWxlcy91aVwiO1xuaW1wb3J0IGJ1dHRvbkZ1bmN0aW9ucyBmcm9tIFwiLi9tb2R1bGVzL2J1dHRvbi1mdW5jdGlvbnNcIjtcbmltcG9ydCB7IHJlbmRlciB9IGZyb20gXCIuL21vZHVsZXMvdG9kb1wiO1xuaW1wb3J0IFByb2plY3RzIGZyb20gXCIuL21vZHVsZXMvcHJvamVjdHNcIjtcblxuY3JlYXRlU3RydWN0dXJlKCk7XG5idXR0b25GdW5jdGlvbnMoKTtcbnJlbmRlcigpO1xuUHJvamVjdHMucmVuZGVyUHJvamVjdHMoKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2plY3RzIHtcbiAgc3RhdGljIHByb2plY3RzID0gW1xuICAgIHtcbiAgICAgIG5hbWU6IFwiSW5ib3hcIixcbiAgICAgIHByb3RlY3RlZDogdHJ1ZSxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiVG9kYXlcIixcbiAgICAgIHByb3RlY3RlZDogdHJ1ZSxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiTGF0ZVwiLFxuICAgICAgcHJvdGVjdGVkOiB0cnVlLFxuICAgIH0sXG4gIF07XG5cbiAgc3RhdGljIHJlbmRlclByb2plY3RzKCkge1xuICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5wYXJzZVByb2plY3RzKCk7XG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5jcmVhdGVQcm9qZWN0KGl0ZW0pO1xuICAgIH0pO1xuICAgIC8vIHRoaXMubmV3UHJvamVjdCh7IG5hbWU6IFwiRHVtbXlcIiwgcHJvdGVjdGVkOiBmYWxzZSB9KTtcbiAgfVxuXG4gIHN0YXRpYyBwYXJzZVByb2plY3RzKCkge1xuICAgIGxldCBpdGVtcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwcm9qZWN0TGlzdFwiKSkgfHwgW107XG4gICAgaWYgKGl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgaXRlbXMgPSB0aGlzLnByb2plY3RzO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9qZWN0TGlzdFwiLCBKU09OLnN0cmluZ2lmeShpdGVtcykpO1xuICAgIH1cbiAgICByZXR1cm4gaXRlbXM7XG4gIH1cblxuICBzdGF0aWMgc2F2ZVByb2plY3RzKGl0ZW0pIHtcbiAgICBjb25zdCBpdGVtcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwcm9qZWN0TGlzdFwiKSk7XG4gICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RMaXN0XCIsIEpTT04uc3RyaW5naWZ5KGl0ZW1zKSk7XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlUHJvamVjdChpdGVtKSB7XG4gICAgY29uc3QgcHJvamVjdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1jb250YWluZXJcIik7XG4gICAgY29uc3QgcHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIHByb2plY3QudGV4dENvbnRlbnQgPSBpdGVtLm5hbWU7XG4gICAgcHJvamVjdC5jbGFzc0xpc3QuYWRkKFwicHJvamVjdFwiKTtcbiAgICBwcm9qZWN0LnNldEF0dHJpYnV0ZShcImlkXCIsIGl0ZW0ubmFtZSk7XG4gICAgcHJvamVjdENvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9qZWN0KTtcbiAgfVxuXG4gIHN0YXRpYyBuZXdQcm9qZWN0KGl0ZW0pIHtcbiAgICB0aGlzLmNyZWF0ZVByb2plY3QoaXRlbSk7XG4gICAgdGhpcy5zYXZlUHJvamVjdHMoaXRlbSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJib2R5IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicGFyc2VMb2NhbFN0b3JhZ2UiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicmVuZGVyIiwidGV4dENvbnRlbnQiLCJmb3JFYWNoIiwiaXRlbSIsImlkIiwiVGFzayIsInRhc2siLCJkZXNjcmlwdGlvbiIsImRhdGUiLCJjb21wbGV0ZWQiLCJjb25zdHJ1Y3RvciIsInRpdGxlIiwidGhpcyIsImNyZWF0ZVRhc2tDb250YWluZXIiLCJpbmJveCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJhcHBlbmRDaGlsZCIsInRhc2tGb3JtIiwicmVhZE9ubHkiLCJ2YWx1ZSIsImVkaXRCdG4iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwidG9nZ2xlIiwiZXZlbnQiLCJkYXRhIiwidGFza1RpdGxlIiwidGFza0Rlc2NyaXB0aW9uIiwidGFza0RhdGUiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiZGVsZXRlQnRuIiwiZGVsIiwic3BsaWNlIiwicXVlcnlTZWxlY3RvckFsbCIsInJlbW92ZSIsImRpdiIsIm5ld0J1dHRvbiIsInByb2plY3RDb250YWluZXIiLCJjcmVhdGVTaWRlYmFyIiwiY3JlYXRlVG9kbyIsImNvbnRhaW5lciIsIm1haW4iLCJmb3JtIiwidGFza0xhYmVsIiwiZGVzY3JpcHRpb25MYWJlbCIsImRhdHVtTGFiZWwiLCJkYXR1bSIsImFkZEJ1dHRvbiIsImNhbmNlbEJ1dHRvbiIsImNyZWF0ZUZvcm0iLCJ0b0RvcyIsInRvRG8iLCJwdXNoIiwic2F2ZVRvRG8iLCJzdGF0aWMiLCJuYW1lIiwicHJvdGVjdGVkIiwicGFyc2VQcm9qZWN0cyIsImNyZWF0ZVByb2plY3QiLCJpdGVtcyIsImxlbmd0aCIsInByb2plY3RzIiwicHJvamVjdCIsInNhdmVQcm9qZWN0cyIsInJlbmRlclByb2plY3RzIl0sInNvdXJjZVJvb3QiOiIifQ==